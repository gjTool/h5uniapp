(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/home/home"],{"1bbe":function(t,e,n){"use strict";n.r(e);var a=n("c60d"),o=n("626c");for(var r in o)"default"!==r&&function(t){n.d(e,t,function(){return o[t]})}(r);n("daca");var i=n("2877"),s=Object(i["a"])(o["default"],a["a"],a["b"],!1,null,null,null);e["default"]=s.exports},"5f91":function(t,e,n){},"626c":function(t,e,n){"use strict";n.r(e);var a=n("6920"),o=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,function(){return a[t]})}(r);e["default"]=o.a},6920:function(t,e,n){"use strict";(function(t,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n("a34a")),r=i(n("4e99"));function i(t){return t&&t.__esModule?t:{default:t}}function s(t,e,n,a,o,r,i){try{var s=t[r](i),u=s.value}catch(l){return void n(l)}s.done?e(u):Promise.resolve(u).then(a,o)}function u(t){return function(){var e=this,n=arguments;return new Promise(function(a,o){var r=t.apply(e,n);function i(t){s(r,a,o,i,u,"next",t)}function u(t){s(r,a,o,i,u,"throw",t)}i(void 0)})}}var l,c=function(){return n.e("components/mix-pulldown-refresh/mix-pulldown-refresh").then(n.bind(null,"b2a3"))},d=function(){return n.e("components/mix-load-more/mix-load-more").then(n.bind(null,"692d"))},f=function(){return n.e("components/uni-icons/uni-icons").then(n.bind(null,"9e2c"))},h=function(){return n.e("components/uni-nav-bar/uni-nav-bar").then(n.bind(null,"b7c2"))},g=0,p=!1,b={components:{mixPulldownRefresh:c,mixLoadMore:d,uniIcons:f,uniNavBar:h},data:function(){return{tabBars:[{name:"小说",id:"2",contentList:[],page:1,pageSize:12,loadMoreStatus:0,refreshing:0},{name:"影视",id:"3",contentList:[],page:1,pageSize:12,loadMoreStatus:0,refreshing:0},{name:"漫画",id:"1",contentList:[],page:1,pageSize:12,loadMoreStatus:0,refreshing:0}],tabCurrentIndex:0,scrollLeft:0,enableScroll:!0,contentData:{},count:3,loadListDownRequest:null,loadListRequest:null,configRequest:null,timedown:3}},computed:{},onLoad:function(){var e=u(o.default.mark(function e(){var n=this;return o.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:g=t.getSystemInfoSync().windowWidth,this.loadList("add",function(t){var e=n.tabBars[1],a=n.tabBars[2];e.loaded=!0,a.loaded=!0,n.getList("add",e,t),n.getList("add",a,t)});case 2:case"end":return e.stop()}},e,this)}));function n(){return e.apply(this,arguments)}return n}(),onReady:function(){},onShow:function(){t.request({url:"https://www.gjtool.cn/download/config.json",method:"GET",complete:function(e){if(200==e.statusCode&&e.data){var n=e.data;n&&n.enable||t.reLaunch({url:"/pages/gonggao/gonggao"})}}})},methods:{imgError:function(t){t.cover="/static/404.jpg"},loadList:function(e,n){var a=this,o=this,i=this.tabBars[this.tabCurrentIndex];if("add"===e){if(2===i.loadMoreStatus)return;i.loadMoreStatus=1}else"refresh"===e&&(i.refreshing=!0);o.contentData.length?setTimeout(function(){o.getList(e,i,o.contentData,n)},600):(this.loadListRequest&&this.loadListRequest.abort(),this.loadListRequest=t.request({url:r.default.baseUrl,data:{name:this.count},method:"GET",complete:function(t){200==t.statusCode&&t.data&&0==t.data.code?(o.contentData=t.data,n&&n(t.data),o.getList(e,i,o.contentData)):i.loadMoreStatus=2,a.loadListRequest=null}}))},loadListDown:function(e){var n=this,a=this,o=this.tabBars[this.tabCurrentIndex];if("add"===e){if(2===o.loadMoreStatus)return;o.loadMoreStatus=1}else"refresh"===e&&(o.refreshing=!0,o.page=1);this.loadListDownRequest&&this.loadListDownRequest.abort(),this.loadListDownRequest=t.request({url:r.default.baseUrl,data:{name:this.count},method:"GET",complete:function(t){200==t.statusCode&&t.data&&0==t.data.code?(a.contentData=t.data,a.getList(e,o,a.contentData)):o.loadMoreStatus=2,n.count++,n.loadListDownRequest=null}})},getList:function(t,e,n){var a=[];"1"==e.id&&(a=n.mhlist),"2"==e.id&&(a=n.xslist),"3"==e.id&&(a=n.yslist),"refresh"===t&&(e.contentList=[]);for(var o=[],r=0;r<a.length;r++)-1==a[r].name.indexOf("legbb")&&-1==a[r].name.indexOf("写真")&&o.push(a[r]);a=o,a.forEach(function(t,n){n>=e.pageSize*(e.page-1)&&n<e.pageSize*e.page&&t&&("3"!=e.id||t.cover||(t.cover="/static/404.jpg"),t._type=e.id,e.contentList.push(t))}),"refresh"===t&&(this.$refs.mixPulldownRefresh&&this.$refs.mixPulldownRefresh.endPulldownRefresh(),e.refreshing=!1,e.loadMoreStatus=0),"add"===t&&(e.loadMoreStatus=e.page*e.pageSize>=a.length?2:0,e.page++),(0==a||e.pageSize>=a.length)&&(e.loadMoreStatus=2)},gotoSearch:function(){console.log(a("点击搜索"," at pages/home/home.vue:271")),t.navigateTo({url:"/pages/search/search"})},navToDetails:function(e){"3"==e._type&&t.navigateTo({url:"/pages/details/details?data=".concat(JSON.stringify(e))}),"1"==e._type&&t.navigateTo({url:"/pages/details/mhdetails?data=".concat(JSON.stringify(e))}),"2"==e._type&&t.navigateTo({url:"/pages/details/xsdetails?data=".concat(JSON.stringify(e))})},onPulldownReresh:function(){this.loadListDown("refresh")},loadMore:function(){this.loadList("add")},setEnableScroll:function(t){this.enableScroll!==t&&(this.enableScroll=t)},changeTab:function(){var t=u(o.default.mark(function t(e){var n,a,r,i,s,u=this;return o.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(p&&(clearTimeout(p),p=!1),n=e,"object"===typeof e&&(n=e.detail.current),"object"===typeof l){t.next=7;break}return t.next=6,this.getElSize("nav-bar");case 6:l=t.sent;case 7:l.scrollLeft,a=0,r=0,i=0;case 11:if(!(i<=n)){t.next=20;break}return t.next=14,this.getElSize("tab"+i);case 14:s=t.sent,a+=s.width,i===n&&(r=s.width);case 17:i++,t.next=11;break;case 20:"number"===typeof e&&(this.tabCurrentIndex=n),p=setTimeout(function(){u.scrollLeft=a-r/2>g/2?a-r/2-g/2:0,"object"===typeof e&&(u.tabCurrentIndex=n),u.tabCurrentIndex=n;var t=u.tabBars[u.tabCurrentIndex];0!==u.tabCurrentIndex&&!0!==t.loaded&&(t.loaded=!0)},300);case 22:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),getElSize:function(e){return new Promise(function(n,a){var o=t.createSelectorQuery().select("#"+e);o.fields({size:!0,scrollOffset:!0,rect:!0},function(t){n(t)}).exec()})}}};e.default=b}).call(this,n("6e42")["default"],n("0de9")["default"])},"70a8":function(t,e,n){"use strict";(function(t){n("c9d0"),n("921b");a(n("66fd"));var e=a(n("1bbe"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("6e42")["createPage"])},c60d:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement;t._self._c},o=[];n.d(e,"a",function(){return a}),n.d(e,"b",function(){return o})},daca:function(t,e,n){"use strict";var a=n("5f91"),o=n.n(a);o.a}},[["70a8","common/runtime","common/vendor"]]]);