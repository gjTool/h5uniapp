(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/mh/mh"],{"114d":function(t,e,n){"use strict";n.r(e);var i=n("3f1b"),o=n("5aec");for(var a in o)"default"!==a&&function(t){n.d(e,t,function(){return o[t]})}(a);n("ea9c");var l=n("2877"),r=Object(l["a"])(o["default"],i["a"],i["b"],!1,null,null,null);e["default"]=r.exports},"3f1b":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement;t._self._c},o=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o})},"5aec":function(t,e,n){"use strict";n.r(e);var i=n("6b64"),o=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);e["default"]=o.a},"6b64":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o(n("4e99"));function o(t){return t&&t.__esModule?t:{default:t}}var a=function(){return n.e("components/mix-loading/mix-loading").then(n.bind(null,"7978"))},l=function(){return n.e("components/uni-icons/uni-icons").then(n.bind(null,"9e2c"))},r=function(){return n.e("components/uni-nav-bar/uni-nav-bar").then(n.bind(null,"b7c2"))},s=function(){return Promise.all([n.e("common/vendor"),n.e("components/battery/battery")]).then(n.bind(null,"3d9f"))},u={components:{mixLoading:a,uniIcons:l,uniNavBar:r,battery:s},data:function(){return{black:!1,num:0,mhname:"",show:!1,visible:!1,loading:!0,title:"",url:"",url1:"",mhlist:[],list:[],scrollTop:0,prevTimer:null,nextTimer:null,xsurl2Request:null,scrollTimer:null,scrollTopTotal:0,style:{pageHeight:0,contentViewHeight:0,footViewHeight:0,mitemHeight:0},UIDevice:null,battery:{},level:100,time:"00:00",getBatteryTimer:null,load5limitCache:!0,flag:0,text:"",lastX:0,lastY:0,ditance:120,cover:""}},methods:{back:function(){t.navigateBack({delta:1})},prev:function(){var e=this,n=this;n.num<=0?t.showToast({title:"已经是第一话了",icon:"none"}):(clearTimeout(this.prevTimer),this.xsurl2Request&&this.xsurl2Request.abort(),this.prevTimer=setTimeout(function(){e.num--,n.num<=-1&&(n.num=0),e.url=e.mhlist[e.num].url,e.reloadContent()},0))},next:function(){var e=this,n=this;n.num>=this.mhlist.length-1?t.showToast({title:"已经是最后一话了",icon:"none"}):(clearTimeout(this.nextTimer),this.xsurl2Request&&this.xsurl2Request.abort(),this.nextTimer=setTimeout(function(){n.num++,n.num>=e.mhlist.length&&(n.num=e.mhlist.length-1),e.url=e.mhlist[e.num].url,e.reloadContent()},0))},download:function(){t.showToast({title:"点击了下载",icon:"none"})},gotomhlist:function(){t.navigateTo({url:"/pages/mhlist/mhlist?mhname="+encodeURIComponent(this.mhname)+"&num="+encodeURIComponent(this.num)+"&from=mh&url="+this.url1+"&cover="+this.cover})},scrollClick:function(){this.show=!this.show,this.getBattery(),this.show?plus.navigator.setFullscreen(!1):plus.navigator.setFullscreen(!0)},getScrollTopTotal:function(){var e=this,n=t.createSelectorQuery();n.selectAll(".m-item").boundingClientRect(),n.select("#scrollview").boundingClientRect(),n.exec(function(t){e.style.mitemHeight=0,t[0].forEach(function(t){return e.style.mitemHeight=e.style.mitemHeight+t.height}),setTimeout(function(){e.scrollTopTotal=e.style.mitemHeight-e.style.contentViewHeight},100)})},getTIme:function(){var t=new Date,e=t.getHours(),n=t.getMinutes();e=e<=9?"0"+e:e,n=n<=9?"0"+n:n,this.time=e+":"+n},getBattery:function(){var t=this;t.getTIme();var e=t.UIDevice.currentDevice();e.isBatteryMonitoringEnabled()||e.setBatteryMonitoringEnabled(!0);var n=e.batteryLevel();t.level=n<=1&&n>=0?Math.round(100*n):Math.round(n)},reloadContent:function(){var e=this,n=this,o=this.num;o=parseInt(o),this.title=this.mhlist[o].num,t.setNavigationBarTitle({title:this.title}),t.setStorage({key:"mhNum"+n.mhname,data:o});try{var a=t.getStorageSync("mhShouCang");if(a){for(var l=0;l<a.length;l++)if(a[l].name==n.mhname){a[l].num=o,!0;break}t.setStorage({key:"mhShouCang",data:a})}}catch(r){}this.loading=!0,this.xsurl2Request=t.request({url:i.default.baseUrl,data:{mhurl2:this.url},method:"GET",complete:function(n){e.loading=!1,200==n.statusCode&&n.data&&0==n.data.code&&(e.list=n.data.list,setTimeout(function(){t.pageScrollTo({scrollTop:0,duration:0})},0)),e.loading=!1}})},handletouchmove:function(t){var e=this;clearTimeout(this.handletouchmoveTimer),this.handletouchmoveTimer=setTimeout(function(){var n=t.changedTouches[0].pageX,i=t.changedTouches[0].pageY,o=n-e.lastX,a=i-e.lastY,l="";Math.abs(o)>Math.abs(a)?o<-e.ditance?(l="向左滑动",e.flag=1):o>e.ditance&&(l="向右滑动",e.flag=2):a<-e.ditance?(l="向上滑动",e.flag=3,e.scrollTopTotal-e.scrollTop-40==0&&e.next()):a>e.ditance&&(l="向下滑动",e.flag=4,0==e.scrollTop&&e.prev()),e.lastX=n,e.lastY=i,e.text=l},20),clearTimeout(this.getBatteryTimer),this.getBatteryTimer=setTimeout(function(){e.getBattery()},300)},handletouchstart:function(t){this.lastX=t.changedTouches[0].pageX,this.lastY=t.changedTouches[0].pageY},handletouchend:function(t){}},onPageScroll:function(t){this.scrollTop=t.scrollTop},onReady:function(){var e=this;switch(this.getTIme(),t.getSystemInfoSync().platform){case"android":var n=plus.android.runtimeMainActivity(),i=plus.android.importClass("android.content.Intent"),o=plus.android.implements("io.dcloud.feature.internal.reflect.BroadcastReceiver",{onReceive:function(t,n){var o=n.getAction();if(o==i.ACTION_BATTERY_CHANGED){var a=n.getIntExtra("level",0);e.level=a<=1&&a>=0?100*Math.round(a):Math.round(a),e.getTIme()}}}),a=plus.android.importClass("android.content.IntentFilter"),l=new a(i.ACTION_BATTERY_CHANGED);n.registerReceiver(o,l);break;case"ios":e.UIDevice=plus.ios.import("UIDevice"),this.getBattery();break;default:e.battery=navigator.battery||navigator.mozBattery||navigator.webkitBattery;var r=function(t){e.level=100*e.battery.level,e.getTIme()};e.battery?e.battery.addEventListener("levelchange",r):navigator.getBattery().then(function(t){e.battery=t,e.battery.addEventListener("levelchange",r)});break}},onUnload:function(){plus.navigator.setFullscreen(!1)},onLoad:function(e){var n=this,o=this;plus.navigator.setFullscreen(!0),this.title=decodeURIComponent(e.name),this.url=decodeURIComponent(e.src),this.mhname=decodeURIComponent(e.mhname),this.cover=decodeURIComponent(e.cover),this.num=decodeURIComponent(e.num),this.url1=decodeURIComponent(e.url),o.mhlist=t.getStorageSync("mhlist"+this.mhname),t.setNavigationBarTitle({title:this.title}),setTimeout(function(){t.request({url:i.default.baseUrl,data:{mhurl1:o.url1},method:"GET",complete:function(e){if(200==e.statusCode&&e.data&&0==e.data.code){var n=e.data.list;o.mhlist=n;try{t.setStorageSync("mhlist"+o.mhname,o.mhlist)}catch(i){}}else t.showToast({title:"获取章节目录失败",icon:"none"})}})},100),this.reloadContent(),this.$eventHub.$on("changeMhContent",function(e,i){n.title=e.num,t.setNavigationBarTitle({title:n.title}),n.num=i,n.url=e.url,n.reloadContent()})}};e.default=u}).call(this,n("6e42")["default"])},"785f":function(t,e,n){},a53f:function(t,e,n){"use strict";(function(t){n("c9d0"),n("921b");i(n("66fd"));var e=i(n("114d"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("6e42")["createPage"])},ea9c:function(t,e,n){"use strict";var i=n("785f"),o=n.n(i);o.a}},[["a53f","common/runtime","common/vendor"]]]);