(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/home/home"],{"0398":function(t,e,a){},"14de":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r(a("4795")),i=r(a("27de"));function r(t){return t&&t.__esModule?t:{default:t}}function s(t,e,a,n,i,r,s){try{var o=t[r](s),c=o.value}catch(u){return void a(u)}o.done?e(c):Promise.resolve(c).then(n,i)}function o(t){return function(){var e=this,a=arguments;return new Promise((function(n,i){var r=t.apply(e,a);function o(t){s(r,n,i,o,c,"next",t)}function c(t){s(r,n,i,o,c,"throw",t)}o(void 0)}))}}var c=function(){a.e("components/mix-loading/mix-loading").then(function(){return resolve(a("a24b"))}.bind(null,a)).catch(a.oe)},u=function(){a.e("components/uni-icons/uni-icons").then(function(){return resolve(a("3e75"))}.bind(null,a)).catch(a.oe)},d=function(){a.e("components/uni-nav-bar/uni-nav-bar").then(function(){return resolve(a("2a57"))}.bind(null,a)).catch(a.oe)},l={components:{mixLoading:c,uniIcons:u,uniNavBar:d},data:function(){return{tabBars:[{name:"影视",id:"3",contentList:[]},{name:"漫画",id:"1",contentList:[]},{name:"小说",id:"2",contentList:[]}],tabCurrentIndex:0,scrollLeft:0,enableScroll:!0,contentData:[],loading:!1,first:!1,keyWord:"",loadListRequest:null,timedown:3,ipad:!1,top:"64px",marginTop:"98px",paddingBottom:"0px",index:t.getStorageSync("config").index,weatherBody:{},weatherBodydata:{},forecastList:[],height:"100%",weixinAdvert:!0,ysurlRequest:null,ysurlRequestList:[],mhurlRequest:null,mhurlRequestList:[],searchWord:t.getStorageSync("config").searchWord||"2020",openid:"",configTimer:null}},computed:{advertNavUrl:function(){return"/pages/gonggao/gonggao"},advertImgUrl:function(){return"/static/advert/1.jpg"}},onShareAppMessage:function(t){return{title:"[免费vip影视]登陆即可观看",imageUrl:"/static/share.jpg",path:"/pages/home/home"}},onShareTimeline:function(){return{title:"[免费vip影视]登陆即可观看",imageUrl:"/static/share.jpg",query:""}},onLoad:function(){var e=this;return o(n.default.mark((function a(){var i,r,s,o,c;return n.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:i=e,r=t.getStorageSync("config"),r&&!r.advert&&(e.timedown=0),i.isCanUse=t.getStorageSync("isCanUse"),e.timedown=0,i.windowWidth=t.getSystemInfoSync().windowWidth,t.getSystemInfoSync().windowHeight,e.statusBarHeight=t.getSystemInfoSync().statusBarHeight,i.index=r.index,e.top=e.statusBarHeight+44+"px",e.marginTop=e.statusBarHeight+78+"px",1==i.index?(i.marginTop=i.statusBarHeight+88+"px",i.height=t.getSystemInfoSync().windowHeight-88-i.statusBarHeight+"px",i.isCanUse||(i.loading=!0,i.keyWord=i.searchWord,s=i.tabBars[0],i.loadList(s),o=i.tabBars[1],i.loadList(o),c=i.tabBars[2],i.loadList(c))):i.marginTop=i.statusBarHeight+44+"px",i.windowWidth>=768&&(e.ipad=!0),e.tabBar=e.getElSize("nav-bar"),t.getSetting({success:function(e){e.authSetting;if(e.authSetting["scope.userInfo"])if(1==i.index){if(i.marginTop=i.statusBarHeight+88+"px",i.height=t.getSystemInfoSync().windowHeight-88-i.statusBarHeight+"px",!i.contentData.length){i.loading=!0,i.keyWord=i.searchWord;var a=i.tabBars[0];i.loadList(a);var n=i.tabBars[1];i.loadList(n);var r=i.tabBars[2];i.loadList(r)}}else i.marginTop=i.statusBarHeight+44+"px",i.forecastList.length||i.getWeather("北京");else i.index=0,i.isCanUse=!0,t.setStorageSync("userInfo",{}),t.setStorageSync("isCanUse",!0),i.marginTop=i.statusBarHeight+44+"px",i.forecastList.length||i.getWeather("北京")}}),e.$eventHub.$on("isCanUse",(function(e){t.request({url:"https://www.gjtool.cn/download/config.json?_t="+(new Date).getTime(),method:"GET",complete:function(e){if(200==e.statusCode&&e.data){if(t.setStorage({key:"config",data:e.data}),e.data.baseUrl?t.setStorageSync("baseUrl",e.data.baseUrl):t.setStorageSync("baseUrl","https://www.gjtool.cn/py"),i.index=e.data.index,0==i.index)i.marginTop=i.statusBarHeight+44+"px",i.forecastList.length||i.getWeather("北京");else if(i.marginTop=i.statusBarHeight+88+"px",i.height=t.getSystemInfoSync().windowHeight-88-i.statusBarHeight+"px",!i.contentData.length){i.loading=!0,i.keyWord=i.searchWord;var a=i.tabBars[0];i.loadList(a);var n=i.tabBars[1];i.loadList(n);var r=i.tabBars[2];i.loadList(r)}e.data.alertText2&&t.showModal({title:"提示",showCancel:!1,content:e.data.alertText2,success:function(t){}})}}})}));case 16:case"end":return a.stop()}}),a)})))()},onNavigationBarSearchInputConfirmed:function(t){this.confirm({detail:{value:t.text}})},onShow:function(){var e=this;this.openid=t.getStorageSync("userInfo").openid;t.getStorageSync("config");e.isCanUse=t.getStorageSync("isCanUse"),clearTimeout(i.default.configTimer),t.getSetting({success:function(a){a.authSetting;if(a.authSetting["scope.userInfo"]){if(e.isCanUse=!1,e.background="RGB(248,249,251)",t.setStorageSync("isCanUse",!1),1==e.index){if(e.marginTop=e.statusBarHeight+88+"px",e.height=t.getSystemInfoSync().windowHeight-88-e.statusBarHeight+"px",!e.contentData.length){e.loading=!0,e.keyWord=e.searchWord;var n=e.tabBars[0];e.loadList(n);var r=e.tabBars[1];e.loadList(r);var s=e.tabBars[2];e.loadList(s)}}else e.marginTop=e.statusBarHeight+44+"px";t.getUserInfo({provider:"weixin",success:function(t){try{e.isCanUse=!1}catch(a){}}})}else{e.isCanUse=!0,t.setStorageSync("isCanUse",!0),e.index=0,e.forecastList.length||e.getWeather("北京");var o=t.getStorageSync("config");o.index=0,t.setStorage({key:"config",data:o}),e.marginTop=e.statusBarHeight+44+"px",o.alertText2&&t.showModal({title:"提示",showCancel:!1,content:o.alertText2,success:function(t){}})}i.default.configTimer=setTimeout((function(){t.request({url:"https://www.gjtool.cn/download/config.json?_t="+(new Date).getTime(),method:"GET",complete:function(a){if(200==a.statusCode&&a.data){if(t.setStorage({key:"config",data:a.data}),a.data.baseUrl?t.setStorageSync("baseUrl",a.data.baseUrl):t.setStorageSync("baseUrl","https://www.gjtool.cn/py"),e.isCanUse?e.index=0:(e.index=a.data.index,e.text=a.data.text),0==e.index)e.marginTop=e.statusBarHeight+44+"px",e.forecastList.length||e.getWeather("北京");else if(e.marginTop=e.statusBarHeight+88+"px",e.height=t.getSystemInfoSync().windowHeight-88-e.statusBarHeight+"px",!e.contentData.length){e.loading=!0,e.keyWord=e.searchWord;var n=e.tabBars[0];e.loadList(n);var i=e.tabBars[1];e.loadList(i);var r=e.tabBars[2];e.loadList(r)}t.showModal({title:"提示",showCancel:!1,content:a.data.alertText2,success:function(t){}})}}})}),1e3)}})},methods:{closeImg:function(t){"weixin-img"!==t.target.id&&(this.weixinAdvert=!1)},imgError:function(t){t.cover="/static/404.jpg"},confirm:function(e){if(this.keyWord=e.detail.value,t.hideKeyboard(),t.pageScrollTo({scrollTop:0,duration:0}),1==this.index){if(0==this.tabCurrentIndex){var a=this.tabBars[0];this.loadList(a)}else if(1==this.tabCurrentIndex){var n=this.tabBars[1];this.loadList(n)}else if(2==this.tabCurrentIndex){var i=this.tabBars[2];this.loadList(i)}}else this.getWeather(this.keyWord)},getWeather:function(e){var a=this;t.request({url:"https://www.tianqiapi.com/api/",method:"GET",data:{version:"v1",city:e,appid:"25698621",appsecret:"6vuISqb3",vue:1},complete:function(t){var e=[];if(200==t.statusCode&&t.data){for(var n=t.data.data,i=0;i<n.length;i++){var r=n[i].day.indexOf("（");n[i].day=n[i].day.substr(r+1,2),e.push(n[i])}a.weatherBody=t.data,a.weatherBodydata=t.data.data[0],a.forecastList=e}}})},back:function(){t.navigateBack({delta:1})},loadList:function(e){var a=this,n=this,i="";e&&("1"==e.id&&(i="mhname"),"2"==e.id&&(i="xsname"),"3"==e.id&&(i="ysname"),""==this.keyWord.trim()&&(this.keyWord=this.searchWord),this.loading=!0,this.loadListRequest,this.ysurlRequestList.length&&this.clearYsurlRequestList(),this.mhurlRequestList.length&&this.clearMhurlRequestList(),0!=this.index&&(this.loadListRequest=t.request({url:t.getStorageSync("baseUrl")+"?"+i+"="+this.keyWord+"&_="+(new Date).getTime(),method:"GET",complete:function(t){if(200==t.statusCode&&t.data&&0==t.data.code){var r=t.data.list,s=[];r.forEach((function(t){t.genre&&t.genre.indexOf("福利")<=-1&&t.genre.indexOf("伦理")<=-1&&t.genre.indexOf("写真")<=-1&&s.push(t)})),n.contentData="ysname"==i?s:t.data.list,n.contentData.length=18,n.getList(e,n.contentData)}else n.getList(e,[]);a.loading=!1,a.loadListRequest=null}})))},getList:function(t,e){var a=this,n=e;if(t.contentList=[],n.forEach((function(e,a){var n=e.genre;t&&"3"==t.id&&!e.cover&&(e.cover="/static/404.jpg"),e._type=t.id,e.imgText="",e.genre=n||"","2"==t.id&&(e.imgText=e.num,e.genre=e.tag?e.tag:"其他"),t.contentList.push(e)})),this.first=!0,"3"==t.id)for(var i=0;i<t.contentList.length;i++)(function(e){a.getCover(t.contentList[e])})(i);else if("1"==t.id)for(var r=0;r<t.contentList.length;r++)(function(e){a.getMhCover(t.contentList[e])})(r)},getCover:function(e){if(0!=this.index){var a=t.request({url:t.getStorageSync("baseUrl"),data:{ysurl:e.url},method:"GET",complete:function(t){if(200==t.statusCode&&t.data&&0==t.data.code){var a=t.data.data,n=e.name;e.cover=a.cover,e.name1=e.name,e.name=a.name;var i=n.replace(e.name,""),r=t.data.list[t.data.list.length-1].num;-1!=i.indexOf("更新")?-1!=e.genre.indexOf("综艺")?-1!=r.indexOf("集")||-1!=r.indexOf("期")?e.imgText="更新至"+r:e.imgText="更新至"+r+"期":e.imgText="更新至"+r:-1!=i.indexOf("完结")?-1==e.genre.indexOf("综艺")?e.imgText=t.data.list.length+"集全":e.imgText="更新至"+r:-1!=i.indexOf("集")?e.imgText="更新至"+r:-1!=i.indexOf("期")?e.imgText="更新至"+r:e.imgText=e.time+"更新"}}});return this.ysurlRequest=a,a}},clearYsurlRequestList:function(){this.ysurlRequestList.length&&(this.ysurlRequestList.forEach((function(t){t.abort()})),this.ysurlRequestList=[])},getMhCover:function(e){if(0!=this.index){var a=t.request({url:t.getStorageSync("baseUrl"),data:{mhurl1:e.url},method:"GET",complete:function(t){if(200==t.statusCode&&t.data&&0==t.data.code){var a=t.data.data;e.name;e.cover=a.cover,e.name=a.name,e.imgText=a.time?a.time+"更新":"",e.genre=a.tag?a.tag:"其他"}}});return this.mhurlRequest=a,a}},clearMhurlRequestList:function(){this.mhurlRequestList.length&&(this.mhurlRequestList.forEach((function(t){t.abort()})),this.mhurlRequestList=[])},navToDetails:function(e){if("3"==e._type){var a="/pages/details/detailsXX?data=".concat(JSON.stringify(e));0==this.index&&(a=""),t.navigateTo({url:a})}if("1"==e._type){var n="/pages/details/mhdetails?data=".concat(JSON.stringify(e));0==this.index&&(n=""),t.navigateTo({url:n})}if("2"==e._type){var i="/pages/details/xsdetails?data=".concat(JSON.stringify(e));0==this.index&&(i=""),t.navigateTo({url:i})}},setEnableScroll:function(t){this.enableScroll!==t&&(this.enableScroll=t)},changeTab:function(t){var e=this;return o(n.default.mark((function a(){var i,r,s,o,c,u;return n.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(i=e,e.loading=!1,e.scrollTimer&&(clearTimeout(e.scrollTimer),e.scrollTimer=!1),r=t,"object"===typeof t&&(r=t.detail.current),"object"===typeof e.tabBar){a.next=9;break}return a.next=8,e.getElSize("nav-bar");case 8:e.tabBar=a.sent;case 9:e.tabBar.scrollLeft,s=0,o=0,c=0;case 13:if(!(c<=r)){a.next=22;break}return a.next=16,e.getElSize("tab"+c);case 16:u=a.sent,s+=u.width,c===r&&(o=u.width);case 19:c++,a.next=13;break;case 22:"number"===typeof t&&(e.tabCurrentIndex=r),e.scrollTimer=setTimeout((function(){}),0),s-o/2>i.windowWidth/2?e.scrollLeft=s-o/2-i.windowWidth/2:e.scrollLeft=0,"object"===typeof t&&(e.tabCurrentIndex=r),e.tabCurrentIndex=r,e.tabBars[e.tabCurrentIndex];case 28:case"end":return a.stop()}}),a)})))()},getElSize:function(e){return new Promise((function(a,n){var i=t.createSelectorQuery().select("#"+e);i.fields({size:!0,scrollOffset:!0,rect:!0},(function(t){a(t)})).exec()}))}}};e.default=l}).call(this,a("543d")["default"])},1653:function(t,e,a){"use strict";a.r(e);var n=a("14de"),i=a.n(n);for(var r in n)"default"!==r&&function(t){a.d(e,t,(function(){return n[t]}))}(r);e["default"]=i.a},3676:function(t,e,a){"use strict";(function(t){a("c0c1");n(a("66fd"));var e=n(a("d3b4"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("543d")["createPage"])},"9b54":function(t,e,a){"use strict";var n={uniNavBar:function(){return a.e("components/uni-nav-bar/uni-nav-bar").then(a.bind(null,"2a57"))},uniIcons:function(){return a.e("components/uni-icons/uni-icons").then(a.bind(null,"3e75"))}},i=function(){var t=this,e=t.$createElement;t._self._c},r=[];a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){return n}))},b89a:function(t,e,a){"use strict";var n=a("c353"),i=a.n(n);i.a},c353:function(t,e,a){},d3b4:function(t,e,a){"use strict";a.r(e);var n=a("9b54"),i=a("1653");for(var r in i)"default"!==r&&function(t){a.d(e,t,(function(){return i[t]}))}(r);a("b89a"),a("eda8");var s,o=a("f0c5"),c=Object(o["a"])(i["default"],n["b"],n["c"],!1,null,"1e4d929e",null,!1,n["a"],s);e["default"]=c.exports},eda8:function(t,e,a){"use strict";var n=a("0398"),i=a.n(n);i.a}},[["3676","common/runtime","common/vendor"]]]);