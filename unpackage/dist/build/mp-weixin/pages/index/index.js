(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"039a":function(t,e,n){"use strict";var i=n("addb"),s=n.n(i);s.a},"127f":function(t,e,n){"use strict";(function(t){n("3be2");i(n("66fd"));var e=i(n("8bb8"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"157f":function(t,e,n){"use strict";var i,s=function(){var t=this,e=t.$createElement;t._self._c},a=[];n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i}))},"4c7e":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("4795")),s=a(n("2681"));function a(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n,i,s,a,r){try{var o=t[a](r),c=o.value}catch(u){return void n(u)}o.done?e(c):Promise.resolve(c).then(i,s)}function o(t){return function(){var e=this,n=arguments;return new Promise((function(i,s){var a=t.apply(e,n);function o(t){r(a,i,s,o,c,"next",t)}function c(t){r(a,i,s,o,c,"throw",t)}o(void 0)}))}}var c,u=function(){n.e("components/mix-loading/mix-loading").then(function(){return resolve(n("7d04"))}.bind(null,n)).catch(n.oe)},l=function(){n.e("components/uni-icons/uni-icons").then(function(){return resolve(n("c33c"))}.bind(null,n)).catch(n.oe)},f=function(){n.e("components/uni-nav-bar/uni-nav-bar").then(function(){return resolve(n("d213"))}.bind(null,n)).catch(n.oe)},d=function(){n.e("components/uni-popup/uni-popup").then(function(){return resolve(n("fedf"))}.bind(null,n)).catch(n.oe)},h=0,g=!1,m={components:{mixLoading:u,uniIcons:l,uniNavBar:f,uniPopup:d},data:function(){return{tabBars:[{name:"影视",id:"3",contentList:[]},{name:"漫画",id:"1",contentList:[]},{name:"小说",id:"2",contentList:[]}],tabCurrentIndex:0,scrollLeft:0,enableScroll:!0,contentData:{},loading:!1,keyWord:"",loadListRequest:null,cancelFlag:!1,show:!1,type:"",selectObj:"",index:0,selectObjIndex:0,openid:"",MhZJList:[],YsZJList:[],XsZJList:[]}},computed:{},onLoad:function(){var e=this;return o(i.default.mark((function n(){var a,r,o,c;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=t.getStorageSync("config"),e.index=a.index,h=t.getSystemInfoSync().windowWidth,e.openid=t.getStorageSync("userInfo").openid,e.MhZJList=s.default.getMhZJ(),e.MhZJList&&e.MhZJList.length)for(e.tabBars[1].contentList=e.MhZJList,r=0;r<e.tabBars[1].contentList.length;r++)(function(t){e.getMhCover(e.tabBars[1].contentList[t],t,e.tabBars[1].contentList.length)})(r);if(e.YsZJList=s.default.getYsZJ(),e.YsZJList&&e.YsZJList.length)for(e.tabBars[0].contentList=e.YsZJList,o=0;o<e.tabBars[0].contentList.length;o++)(function(t){e.getCover(e.tabBars[0].contentList[t],t,e.tabBars[0].contentList.length)})(o);if(e.XsZJList=s.default.getXsZJ(),e.XsZJList&&e.XsZJList.length)for(e.tabBars[2].contentList=e.XsZJList,c=0;c<e.tabBars[2].contentList.length;c++)(function(t){e.getXsCover(e.tabBars[2].contentList[t],t,e.tabBars[2].contentList.length)})(c);case 10:case"end":return n.stop()}}),n)})))()},onNavigationBarButtonTap:function(t){0==t.index&&this.clearCache(),1==t.index&&this.bianji()},onShow:function(){this.MhZJList=s.default.getMhZJ(),this.MhZJList&&this.MhZJList.length&&(this.tabBars[1].contentList=this.MhZJList),this.YsZJList=s.default.getYsZJ(),this.YsZJList&&this.YsZJList.length&&(this.tabBars[0].contentList=this.YsZJList),this.XsZJList=s.default.getXsZJ(),this.XsZJList&&this.XsZJList.length&&(this.tabBars[2].contentList=this.XsZJList)},methods:{getCover:function(e,n,i){var s=this;if(0!=this.index){var a=t.request({url:t.getStorageSync("baseUrl"),data:{ysurl:e.url},method:"GET",complete:function(n){if(200==n.statusCode&&n.data&&0==n.data.code){var i=n.data.data,a=e.name;e.cover=i.cover,e.name=i.name;var r=a.replace(e.name,"");if(-1!=r.indexOf("更新"))if(-1!=e.genre.indexOf("综艺")){var o=n.data.list[n.data.list.length-1].num;-1!=o.indexOf("集")||-1!=o.indexOf("期")?e.imgText="更新至"+o:e.imgText="更新至"+o+"期"}else e.imgText=r;else-1!=r.indexOf("完结")?-1==e.genre.indexOf("综艺")?e.imgText=n.data.list.length+"集全":e.imgText=r:-1!=r.indexOf("集")?e.imgText=r:-1!=r.indexOf("期")?e.imgText=r:e.imgText=e.time+"更新"}t.setStorage({key:s.openid+"ysZJ",data:s.tabBars[0].contentList})}});return this.ysurlRequest=a,a}},clearYsurlRequestList:function(){this.ysurlRequestList.length&&(this.ysurlRequestList.forEach((function(t){t.abort()})),this.ysurlRequestList=[])},getMhCover:function(e,n,i){var s=this;if(0!=this.index){var a=t.request({url:t.getStorageSync("baseUrl"),data:{mhurl1:e.url},method:"GET",complete:function(n){if(200==n.statusCode&&n.data&&0==n.data.code){var i=n.data.data;e.name;e.cover=i.cover,e.name=i.name,e.imgText=i.time?i.time+"更新":"",e.genre=i.tag?i.tag:"其他"}t.setStorage({key:s.openid+"mhZJ",data:s.tabBars[1].contentList})}});return this.mhurlRequest=a,a}},clearMhurlRequestList:function(){this.mhurlRequestList.length&&(this.mhurlRequestList.forEach((function(t){t.abort()})),this.mhurlRequestList=[])},getXsCover:function(e,n,i){var s=this;if(0!=this.index){var a=t.request({url:t.getStorageSync("baseUrl"),data:{xsname:e.name},method:"GET",complete:function(n){if(200==n.statusCode&&n.data&&0==n.data.code){var i=n.data.list;i.forEach((function(n){n.url===e.url&&(e.imgText=n.num,e.genre=n.tag?n.tag:"其他",t.setStorage({key:s.openid+"xsZJ",data:s.tabBars[2].contentList}))}))}}});return this.xsurlRequest=a,a}},clearXsurlRequestList:function(){this.xsurlRequestList.length&&(this.xsurlRequestList.forEach((function(t){t.abort()})),this.xsurlRequestList=[])},navToDetails:function(e){if("3"==e._type){var n="/pages/details/detailsMP?data=".concat(JSON.stringify(e));0==this.index&&(n=""),t.navigateTo({url:n})}if("1"==e._type){var i=t.getStorageSync("mhlist"+e.url),s="/pages/mh/mh?src="+encodeURIComponent(i[e.num].url)+"&data="+JSON.stringify(e);0==this.index&&(s=""),t.navigateTo({url:s})}if("2"==e._type){var a=t.getStorageSync("xslist"+e.url),r="/pages/xs/xs?src="+encodeURIComponent(a[e.index].url)+"&data="+JSON.stringify(e);0==this.index&&(r=""),t.navigateTo({url:r})}},clearCache:function(){var e=this;t.showModal({title:"提示",content:"确定清除所有缓存吗？",success:function(n){if(n.confirm)try{t.clearStorage(),t.showToast({title:"清除成功",icon:"none"}),e.tabBars=[{name:"影视",id:"3",contentList:[]},{name:"漫画",id:"1",contentList:[]}]}catch(i){}}})},imgError:function(t){t.cover="/static/404.jpg"},setEnableScroll:function(t){this.enableScroll!==t&&(this.enableScroll=t)},changeTab:function(t){var e=this;return o(i.default.mark((function n(){var s,a,r,o,u;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.loading=!1,g&&(clearTimeout(g),g=!1),s=t,"object"===typeof t&&(s=t.detail.current),"object"===typeof c){n.next=8;break}return n.next=7,e.getElSize("nav-bar");case 7:c=n.sent;case 8:c.scrollLeft,a=0,r=0,o=0;case 12:if(!(o<=s)){n.next=21;break}return n.next=15,e.getElSize("tab"+o);case 15:u=n.sent,a+=u.width,o===s&&(r=u.width);case 18:o++,n.next=12;break;case 21:"number"===typeof t&&(e.tabCurrentIndex=s),g=setTimeout((function(){e.scrollLeft=a-r/2>h/2?a-r/2-h/2:0,"object"===typeof t&&(e.tabCurrentIndex=s),e.tabCurrentIndex=s;e.tabBars[e.tabCurrentIndex]}),300);case 23:case"end":return n.stop()}}),n)})))()},getElSize:function(e){return new Promise((function(n,i){var s=t.createSelectorQuery().select("#"+e);s.fields({size:!0,scrollOffset:!0,rect:!0},(function(t){n(t)})).exec()}))}}};e.default=m}).call(this,n("543d")["default"])},"85d2":function(t,e,n){"use strict";n.r(e);var i=n("4c7e"),s=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=s.a},"8bb8":function(t,e,n){"use strict";n.r(e);var i=n("157f"),s=n("85d2");for(var a in s)"default"!==a&&function(t){n.d(e,t,(function(){return s[t]}))}(a);n("039a");var r,o=n("f0c5"),c=Object(o["a"])(s["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],r);e["default"]=c.exports},addb:function(t,e,n){}},[["127f","common/runtime","common/vendor"]]]);