(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"039a":function(t,e,n){"use strict";var i=n("addb"),s=n.n(i);s.a},"127f":function(t,e,n){"use strict";(function(t){n("3be2");i(n("66fd"));var e=i(n("8bb8"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"1f50":function(t,e,n){"use strict";var i,s=function(){var t=this,e=t.$createElement;t._self._c},a=[];n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i}))},"4c7e":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("4795")),s=a(n("2681"));function a(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n,i,s,a,r){try{var o=t[a](r),u=o.value}catch(c){return void n(c)}o.done?e(u):Promise.resolve(u).then(i,s)}function o(t){return function(){var e=this,n=arguments;return new Promise((function(i,s){var a=t.apply(e,n);function o(t){r(a,i,s,o,u,"next",t)}function u(t){r(a,i,s,o,u,"throw",t)}o(void 0)}))}}var u=function(){n.e("components/mix-loading/mix-loading").then(function(){return resolve(n("7d04"))}.bind(null,n)).catch(n.oe)},c=function(){n.e("components/uni-icons/uni-icons").then(function(){return resolve(n("c33c"))}.bind(null,n)).catch(n.oe)},l=function(){n.e("components/uni-nav-bar/uni-nav-bar").then(function(){return resolve(n("d213"))}.bind(null,n)).catch(n.oe)},f=function(){n.e("components/uni-popup/uni-popup").then(function(){return resolve(n("fedf"))}.bind(null,n)).catch(n.oe)},d={components:{mixLoading:u,uniIcons:c,uniNavBar:l,uniPopup:f},data:function(){return{tabBars:[{name:"影视",id:"3",contentList:[]},{name:"漫画",id:"1",contentList:[]},{name:"小说",id:"2",contentList:[]}],tabCurrentIndex:0,scrollLeft:0,enableScroll:!0,contentData:{},loading:!1,keyWord:"",loadListRequest:null,cancelFlag:!1,show:!1,type:"",selectObj:"",index:0,selectObjIndex:0,openid:"",MhZJList:[],YsZJList:[],XsZJList:[]}},onLoad:function(){var e=this;return o(i.default.mark((function n(){var a,r,o,u,c;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=e,r=t.getStorageSync("config"),e.index=r.index,a.windowWidth=t.getSystemInfoSync().windowWidth,e.openid=t.getStorageSync("userInfo").openid,e.MhZJList=s.default.getMhZJ(),e.MhZJList&&e.MhZJList.length)for(e.tabBars[1].contentList=e.MhZJList,o=0;o<e.tabBars[1].contentList.length;o++)(function(t){e.getMhCover(e.tabBars[1].contentList[t],t,e.tabBars[1].contentList.length)})(o);if(e.YsZJList=s.default.getYsZJ(),e.YsZJList&&e.YsZJList.length)for(e.tabBars[0].contentList=e.YsZJList,u=0;u<e.tabBars[0].contentList.length;u++)(function(t){e.getCover(e.tabBars[0].contentList[t],t,e.tabBars[0].contentList.length)})(u);if(e.XsZJList=s.default.getXsZJ(),e.XsZJList&&e.XsZJList.length)for(e.tabBars[2].contentList=e.XsZJList,c=0;c<e.tabBars[2].contentList.length;c++)(function(t){e.getXsCover(e.tabBars[2].contentList[t],t,e.tabBars[2].contentList.length)})(c);a.tabBar=e.getElSize("nav-bar");case 12:case"end":return n.stop()}}),n)})))()},onNavigationBarButtonTap:function(t){0==t.index&&this.clearCache(),1==t.index&&this.bianji()},onShow:function(){this.MhZJList=s.default.getMhZJ(),this.MhZJList&&this.MhZJList.length&&(this.tabBars[1].contentList=this.MhZJList),this.YsZJList=s.default.getYsZJ(),this.YsZJList&&this.YsZJList.length&&(this.tabBars[0].contentList=this.YsZJList),this.XsZJList=s.default.getXsZJ(),this.XsZJList&&this.XsZJList.length&&(this.tabBars[2].contentList=this.XsZJList)},methods:{getCover:function(e,n,i){if(0!=this.index){var s=t.request({url:t.getStorageSync("baseUrl"),data:{ysurl:e.url},method:"GET",complete:function(t){if(200==t.statusCode&&t.data&&0==t.data.code){var n=t.data.data,i=e.name;e.cover=n.cover,e.name=n.name;var s=i.replace(e.name1,"");if(-1!=s.indexOf("更新"))if(-1!=e.genre.indexOf("综艺")){var a=t.data.list[t.data.list.length-1].num;-1!=a.indexOf("集")||-1!=a.indexOf("期")?e.imgText="更新至"+a:e.imgText="更新至"+a+"期"}else e.imgText=s;else-1!=s.indexOf("完结")?-1==e.genre.indexOf("综艺")?e.imgText=t.data.list.length+"集全":e.imgText=s:-1!=s.indexOf("集")?e.imgText=s:-1!=s.indexOf("期")?e.imgText=s:e.imgText=e.time+"更新"}}});return this.ysurlRequest=s,s}},clearYsurlRequestList:function(){this.ysurlRequestList.length&&(this.ysurlRequestList.forEach((function(t){t.abort()})),this.ysurlRequestList=[])},getMhCover:function(e,n,i){if(0!=this.index){var s=t.request({url:t.getStorageSync("baseUrl"),data:{mhurl1:e.url},method:"GET",complete:function(t){if(200==t.statusCode&&t.data&&0==t.data.code){var n=t.data.data;e.name;e.cover=n.cover,e.name=n.name,e.imgText=n.time?n.time+"更新":"",e.genre=n.tag?n.tag:"其他"}}});return this.mhurlRequest=s,s}},clearMhurlRequestList:function(){this.mhurlRequestList.length&&(this.mhurlRequestList.forEach((function(t){t.abort()})),this.mhurlRequestList=[])},getXsCover:function(e,n,i){if(0!=this.index){var s=t.request({url:t.getStorageSync("baseUrl"),data:{xsurl1:e.url},method:"GET",complete:function(t){if(200==t.statusCode&&t.data&&0==t.data.code){var n=t.data.data;e.imgText=n.num,e.num=n.num}}});return this.xsurlRequest=s,s}},clearXsurlRequestList:function(){this.xsurlRequestList.length&&(this.xsurlRequestList.forEach((function(t){t.abort()})),this.xsurlRequestList=[])},navToDetails:function(e){if("3"==e._type){var n="/pages/details/detailsMP?data=".concat(JSON.stringify(e));0==this.index&&(n=""),t.navigateTo({url:n})}if("1"==e._type){var i=t.getStorageSync("mhlist"+e.url),s="/pages/mh/mh?src="+encodeURIComponent(i[e.num].url)+"&data="+JSON.stringify(e);0==this.index&&(s=""),t.navigateTo({url:s})}if("2"==e._type){var a=t.getStorageSync("xslist"+e.url),r="/pages/xs/xs?src="+encodeURIComponent(a[e.index].url)+"&data="+JSON.stringify(e);0==this.index&&(r=""),t.navigateTo({url:r})}},clearCache:function(){var e=this;t.showModal({title:"提示",content:"确定清除所有缓存吗？",success:function(n){if(n.confirm)try{t.clearStorage(),t.showToast({title:"清除成功",icon:"none"}),e.tabBars=[{name:"影视",id:"3",contentList:[]},{name:"漫画",id:"1",contentList:[]}]}catch(i){}}})},imgError:function(t){t.cover="/static/404.jpg"},setEnableScroll:function(t){this.enableScroll!==t&&(this.enableScroll=t)},changeTab:function(t){var e=this;return o(i.default.mark((function n(){var s,a,r,o,u,c;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(s=e,e.loading=!1,s.scrollTimer&&(clearTimeout(s.scrollTimer),s.scrollTimer=!1),a=t,"object"===typeof t&&(a=t.detail.current),"object"===typeof s.tabBar){n.next=9;break}return n.next=8,e.getElSize("nav-bar");case 8:s.tabBar=n.sent;case 9:s.tabBar.scrollLeft,r=0,o=0,u=0;case 13:if(!(u<=a)){n.next=22;break}return n.next=16,e.getElSize("tab"+u);case 16:c=n.sent,r+=c.width,u===a&&(o=c.width);case 19:u++,n.next=13;break;case 22:"number"===typeof t&&(e.tabCurrentIndex=a),s.scrollTimer=setTimeout((function(){}),0),r-o/2>s.windowWidth/2?e.scrollLeft=r-o/2-s.windowWidth/2:e.scrollLeft=0,"object"===typeof t&&(e.tabCurrentIndex=a),e.tabCurrentIndex=a,e.tabBars[e.tabCurrentIndex];case 28:case"end":return n.stop()}}),n)})))()},getElSize:function(e){return new Promise((function(n,i){var s=t.createSelectorQuery().select("#"+e);s.fields({size:!0,scrollOffset:!0,rect:!0},(function(t){n(t)})).exec()}))}}};e.default=d}).call(this,n("543d")["default"])},"85d2":function(t,e,n){"use strict";n.r(e);var i=n("4c7e"),s=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=s.a},"8bb8":function(t,e,n){"use strict";n.r(e);var i=n("1f50"),s=n("85d2");for(var a in s)"default"!==a&&function(t){n.d(e,t,(function(){return s[t]}))}(a);n("039a");var r,o=n("f0c5"),u=Object(o["a"])(s["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],r);e["default"]=u.exports},addb:function(t,e,n){}},[["127f","common/runtime","common/vendor"]]]);