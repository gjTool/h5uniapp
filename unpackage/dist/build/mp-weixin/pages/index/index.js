(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"039a":function(t,e,n){"use strict";var i=n("addb"),a=n.n(i);a.a},"127f":function(t,e,n){"use strict";(function(t){n("3be2");i(n("66fd"));var e=i(n("8bb8"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"4c7e":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n("4795")),a=r(n("2681"));function r(t){return t&&t.__esModule?t:{default:t}}function s(t,e,n,i,a,r,s){try{var o=t[r](s),c=o.value}catch(u){return void n(u)}o.done?e(c):Promise.resolve(c).then(i,a)}function o(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(t){s(r,i,a,o,c,"next",t)}function c(t){s(r,i,a,o,c,"throw",t)}o(void 0)}))}}var c,u=function(){n.e("components/mix-loading/mix-loading").then(function(){return resolve(n("7d04"))}.bind(null,n)).catch(n.oe)},l=function(){n.e("components/uni-icons/uni-icons").then(function(){return resolve(n("c33c"))}.bind(null,n)).catch(n.oe)},f=function(){n.e("components/uni-nav-bar/uni-nav-bar").then(function(){return resolve(n("d213"))}.bind(null,n)).catch(n.oe)},d=function(){n.e("components/uni-popup/uni-popup").then(function(){return resolve(n("fedf"))}.bind(null,n)).catch(n.oe)},h=0,g=!1,m={components:{mixLoading:u,uniIcons:l,uniNavBar:f,uniPopup:d},data:function(){return{tabBars:[{name:"影视",id:"3",contentList:[]},{name:"漫画",id:"1",contentList:[]}],tabCurrentIndex:0,scrollLeft:0,enableScroll:!0,contentData:{},loading:!1,keyWord:"",loadListRequest:null,cancelFlag:!1,show:!1,type:"",selectObj:"",index:0,selectObjIndex:0,openid:"",MhZJList:[],YsZJList:[]}},computed:{},onLoad:function(){var e=this;return o(i.default.mark((function n(){var r,s,o;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=t.getStorageSync("config"),e.index=r.index,h=t.getSystemInfoSync().windowWidth,e.openid=t.getStorageSync("userInfo").openid,e.MhZJList=a.default.getMhZJ(),e.MhZJList&&e.MhZJList.length)for(e.tabBars[1].contentList=e.MhZJList,s=0;s<e.tabBars[1].contentList.length;s++)(function(t){e.getMhCover(e.tabBars[1].contentList[t],t,e.tabBars[1].contentList.length)})(s);if(e.YsZJList=a.default.getYsZJ(),e.YsZJList&&e.YsZJList.length)for(e.tabBars[0].contentList=e.YsZJList,o=0;o<e.tabBars[0].contentList.length;o++)(function(t){e.getCover(e.tabBars[0].contentList[t],t,e.tabBars[0].contentList.length)})(o);case 8:case"end":return n.stop()}}),n)})))()},onNavigationBarButtonTap:function(t){0==t.index&&this.clearCache(),1==t.index&&this.bianji()},onShow:function(){this.MhZJList=a.default.getMhZJ(),this.MhZJList&&this.MhZJList.length&&(this.tabBars[1].contentList=this.MhZJList),this.YsZJList=a.default.getYsZJ(),this.YsZJList&&this.YsZJList.length&&(this.tabBars[0].contentList=this.YsZJList)},onHide:function(){this.$refs["share"].close(),this.cancelFlag=!1},onReady:function(){},methods:{getCover:function(e,n,i){var r=this;if(0!=this.index){var s=t.request({url:a.default.baseUrl,data:{ysurl:e.url},method:"GET",complete:function(a){if(200==a.statusCode&&a.data&&0==a.data.code){var s=a.data.data,o=e.name;e.cover=s.cover,e.name=s.name;var c=o.replace(e.name,"");if(-1!=c.indexOf("更新"))if(-1!=e.genre.indexOf("综艺")){var u=a.data.list[a.data.list.length-1].num;-1!=u.indexOf("集")||-1!=u.indexOf("期")?e.imgText="更新至"+u:e.imgText="更新至"+u+"期"}else e.imgText=c;else-1!=c.indexOf("完结")?-1==e.genre.indexOf("综艺")?e.imgText=a.data.list.length+"集全":e.imgText=c:-1!=c.indexOf("集")?e.imgText=c:-1!=c.indexOf("期")?e.imgText=c:e.imgText=e.time+"更新"}n==i-1&&t.setStorage({key:r.openid+"ysZJ",data:r.tabBars[0].contentList})}});return this.ysurlRequest=s,s}},clearYsurlRequestList:function(){this.ysurlRequestList.length&&(this.ysurlRequestList.forEach((function(t){t.abort()})),this.ysurlRequestList=[])},getMhCover:function(e,n,i){var r=this;if(0!=this.index){var s=t.request({url:a.default.baseUrl,data:{mhurl1:e.url},method:"GET",complete:function(a){if(200==a.statusCode&&a.data&&0==a.data.code){var s=a.data.data;e.name;e.cover=s.cover,e.name=s.name,e.imgText=s.time?s.time+"更新":"",e.genre=s.tag?s.tag:"其他"}n==i-1&&t.setStorage({key:r.openid+"mhZJ",data:r.tabBars[1].contentList})}});return this.mhurlRequest=s,s}},clearMhurlRequestList:function(){this.mhurlRequestList.length&&(this.mhurlRequestList.forEach((function(t){t.abort()})),this.mhurlRequestList=[])},navToDetails:function(e){if("3"==e._type){var n="/pages/details/detailsMP?data=".concat(JSON.stringify(e));0==this.index&&(n=""),t.navigateTo({url:n})}if("1"==e._type){var i=t.getStorageSync("mhlist"+e.url),a="/pages/mh/mh?src="+encodeURIComponent(i[e.num].url)+"&data="+JSON.stringify(e);0==this.index&&(a=""),t.navigateTo({url:a})}},clearCache:function(){var e=this;t.showModal({title:"提示",content:"确定清除所有缓存吗？",success:function(n){if(n.confirm)try{t.clearStorage(),t.showToast({title:"清除成功",icon:"none"}),e.tabBars=[{name:"影视",id:"3",contentList:[]},{name:"漫画",id:"1",contentList:[]}]}catch(i){}}})},imgError:function(t){t.cover="/static/404.jpg"},setEnableScroll:function(t){this.enableScroll!==t&&(this.enableScroll=t)},changeTab:function(t){var e=this;return o(i.default.mark((function n(){var a,r,s,o,u;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.loading=!1,g&&(clearTimeout(g),g=!1),a=t,"object"===typeof t&&(a=t.detail.current),"object"===typeof c){n.next=8;break}return n.next=7,e.getElSize("nav-bar");case 7:c=n.sent;case 8:c.scrollLeft,r=0,s=0,o=0;case 12:if(!(o<=a)){n.next=21;break}return n.next=15,e.getElSize("tab"+o);case 15:u=n.sent,r+=u.width,o===a&&(s=u.width);case 18:o++,n.next=12;break;case 21:"number"===typeof t&&(e.tabCurrentIndex=a),g=setTimeout((function(){e.scrollLeft=r-s/2>h/2?r-s/2-h/2:0,"object"===typeof t&&(e.tabCurrentIndex=a),e.tabCurrentIndex=a;e.tabBars[e.tabCurrentIndex]}),300);case 23:case"end":return n.stop()}}),n)})))()},getElSize:function(e){return new Promise((function(n,i){var a=t.createSelectorQuery().select("#"+e);a.fields({size:!0,scrollOffset:!0,rect:!0},(function(t){n(t)})).exec()}))}}};e.default=m}).call(this,n("543d")["default"])},"85d2":function(t,e,n){"use strict";n.r(e);var i=n("4c7e"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},"8bb8":function(t,e,n){"use strict";n.r(e);var i=n("e9cf"),a=n("85d2");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);n("039a");var s,o=n("f0c5"),c=Object(o["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],s);e["default"]=c.exports},addb:function(t,e,n){},e9cf:function(t,e,n){"use strict";var i,a=function(){var t=this,e=t.$createElement;t._self._c},r=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}))}},[["127f","common/runtime","common/vendor"]]]);