(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/mh/mh"],{"55fb":function(t,e,n){"use strict";n.r(e);var o=n("fb9d"),i=n.n(o);for(var a in o)"default"!==a&&function(t){n.d(e,t,(function(){return o[t]}))}(a);e["default"]=i.a},a26d:function(t,e,n){"use strict";n.r(e);var o=n("f3e5"),i=n("55fb");for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);n("af39");var l,s=n("f0c5"),u=Object(s["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],l);e["default"]=u.exports},af39:function(t,e,n){"use strict";var o=n("bf8f"),i=n.n(o);i.a},bf8f:function(t,e,n){},c28c:function(t,e,n){"use strict";(function(t){n("2d68");o(n("66fd"));var e=o(n("a26d"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},f3e5:function(t,e,n){"use strict";var o,i=function(){var t=this,e=t.$createElement;t._self._c},a=[];n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return o}))},fb9d:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n("c644"));function i(t){return t&&t.__esModule?t:{default:t}}var a=function(){n.e("components/mix-loading/mix-loading").then(function(){return resolve(n("3075"))}.bind(null,n)).catch(n.oe)},l=function(){n.e("components/uni-icons/uni-icons").then(function(){return resolve(n("72fa"))}.bind(null,n)).catch(n.oe)},s=function(){n.e("components/uni-nav-bar/uni-nav-bar").then(function(){return resolve(n("4e45"))}.bind(null,n)).catch(n.oe)},u=function(){n.e("components/battery/battery").then(function(){return resolve(n("5aa6"))}.bind(null,n)).catch(n.oe)},c={components:{mixLoading:a,uniIcons:l,uniNavBar:s,battery:u},data:function(){return{black:!1,num:0,mhname:"",show:!1,visible:!1,loading:!0,title:"",url:"",url1:"",mhlist:[],list:[],scrollTop:0,prevTimer:null,nextTimer:null,xsurl2Request:null,scrollTimer:null,scrollTopTotal:0,style:{pageHeight:0,contentViewHeight:0,footViewHeight:0,mitemHeight:0},platform:"",main:null,Intent:null,IntentFilter:null,UIDevice:null,battery:{},level:100,time:"00:00",getBatteryTimer:null,load5limitCache:!0,flag:0,text:"",lastX:0,lastY:0,ditance:120,cover:"",x:0,y:0,currentWebview:null,titleNView:null}},onNavigationBarButtonTap:function(t){0==t.index&&this.gotomhlist(),t.index},created:function(){var e=t.getSystemInfoSync();this.windowWidth=e.windowWidth,this.windowHeight=e.windowHeight,this.platform=t.getSystemInfoSync().platform},methods:{back:function(){t.navigateBack({delta:1})},prev:function(){var e=this,n=this;n.num<=0?t.showToast({title:"已经是第一话了",icon:"none"}):(clearTimeout(this.prevTimer),this.xsurl2Request&&this.xsurl2Request.abort(),this.prevTimer=setTimeout((function(){e.num--,n.num<=-1&&(n.num=0),e.url=e.mhlist[e.num].url,e.reloadContent()}),0))},next:function(){var e=this,n=this;n.num>=this.mhlist.length-1?t.showToast({title:"已经是最后一话了",icon:"none"}):(clearTimeout(this.nextTimer),this.xsurl2Request&&this.xsurl2Request.abort(),this.nextTimer=setTimeout((function(){n.num++,n.num>=e.mhlist.length&&(n.num=e.mhlist.length-1),e.url=e.mhlist[e.num].url,e.reloadContent()}),0))},download:function(){t.showToast({title:"点击了下载",icon:"none"})},gotomhlist:function(){t.navigateTo({url:"/pages/mhlist/mhlist?mhname="+encodeURIComponent(this.mhname)+"&num="+encodeURIComponent(this.num)+"&from=mh&url="+this.url1+"&cover="+this.cover})},scrollClick:function(){this.show=!this.show},getScrollTopTotal:function(){var e=this,n=t.createSelectorQuery();n.selectAll(".m-item").boundingClientRect(),n.select("#scrollview").boundingClientRect(),n.exec((function(t){e.style.mitemHeight=0,t[0].forEach((function(t){return e.style.mitemHeight=e.style.mitemHeight+t.height})),setTimeout((function(){e.scrollTopTotal=e.style.mitemHeight-e.style.contentViewHeight}),100)}))},getTIme:function(){var t=new Date,e=t.getHours(),n=t.getMinutes();e=e<=9?"0"+e:e,n=n<=9?"0"+n:n,this.time=e+":"+n},getBattery:function(){var t=this;t.getTIme()},reloadContent:function(){var e=this,n=this,i=this.num;i=parseInt(i),this.title=this.mhlist[i].num,t.setNavigationBarTitle({title:this.title}),t.setStorage({key:"mhNum"+n.mhname,data:i});try{var a=t.getStorageSync("mhShouCang");if(a){for(var l=0;l<a.length;l++)if(a[l].name==n.mhname){a[l].num=i,!0;break}t.setStorage({key:"mhShouCang",data:a})}}catch(s){}this.loading=!0,this.xsurl2Request=t.request({url:o.default.baseUrl,data:{mhurl2:this.url},method:"GET",complete:function(n){e.loading=!1,200==n.statusCode&&n.data&&0==n.data.code?(e.list=n.data.list,e.list.length||t.showToast({title:"获取漫画数据失败",icon:"none"}),setTimeout((function(){t.pageScrollTo({scrollTop:0,duration:0})}),0)):t.showToast({title:"获取漫画数据失败",icon:"none"}),e.loading=!1}})},handletouchmove:function(t){var e=this;clearTimeout(this.handletouchmoveTimer),this.handletouchmoveTimer=setTimeout((function(){if(!t.changedTouches&&!t.changedTouches[0]){var n=t.changedTouches[0].pageX,o=t.changedTouches[0].pageY,i=n-e.lastX,a=o-e.lastY,l="";Math.abs(i)>Math.abs(a)?i<-e.ditance?(l="向左滑动",e.flag=1):i>e.ditance&&(l="向右滑动",e.flag=2):a<-e.ditance?(l="向上滑动",e.flag=3,e.scrollTopTotal-e.scrollTop-40==0&&e.next()):a>e.ditance&&(l="向下滑动",e.flag=4,0==e.scrollTop&&e.prev()),e.lastX=n,e.lastY=o,e.text=l}}),20),clearTimeout(this.getBatteryTimer),this.getBatteryTimer=setTimeout((function(){e.getBattery()}),300)},handletouchstart:function(t){t.changedTouches&&t.changedTouches[0]&&(this.lastX=t.changedTouches[0].pageX,this.lastY=t.changedTouches[0].pageY)},handletouchend:function(t){}},onPageScroll:function(t){this.scrollTop=t.scrollTop},onReady:function(){switch(this.getTIme(),t.getSystemInfoSync().platform){case"android":break;case"ios":break;default:break}},onUnload:function(){},onLoad:function(e){var n=this,i=this;this.title=decodeURIComponent(e.name),this.url=decodeURIComponent(e.src),this.mhname=decodeURIComponent(e.mhname),this.cover=decodeURIComponent(e.cover),this.num=decodeURIComponent(e.num),this.url1=decodeURIComponent(e.url),i.mhlist=t.getStorageSync("mhlist"+this.mhname),t.setNavigationBarTitle({title:this.title}),setTimeout((function(){t.request({url:o.default.baseUrl,data:{mhurl1:i.url1},method:"GET",complete:function(e){if(200==e.statusCode&&e.data&&0==e.data.code){var n=e.data.list;i.mhlist=n;try{t.setStorageSync("mhlist"+i.mhname,i.mhlist)}catch(o){}}else t.showToast({title:"获取章节目录失败",icon:"none"})}})}),100),this.reloadContent(),this.$eventHub.$on("changeMhContent",(function(e,o){n.title=e.num,t.setNavigationBarTitle({title:n.title}),n.num=o,n.url=e.url,n.reloadContent()}))}};e.default=c}).call(this,n("543d")["default"])}},[["c28c","common/runtime","common/vendor"]]]);