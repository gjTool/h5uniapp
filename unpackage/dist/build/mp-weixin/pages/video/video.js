(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/video/video"],{"077c":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;o(i("2681"));function o(t){return t&&t.__esModule?t:{default:t}}var n=function(){i.e("components/uni-icons/uni-icons").then(function(){return resolve(i("c33c"))}.bind(null,i)).catch(i.oe)},s=function(){i.e("components/uni-nav-bar/uni-nav-bar").then(function(){return resolve(i("d213"))}.bind(null,i)).catch(i.oe)},u=function(){i.e("components/battery/battery").then(function(){return resolve(i("3715"))}.bind(null,i)).catch(i.oe)},l={components:{uniIcons:n,uniNavBar:s,battery:u},data:function(){return{num:0,loading:!0,detailData:{},list:[],obj:{},name:"",videoContext:null,video_mask:null,video_content:null,videoshow:!1,checked:!1,index:0,webviewStyles:{top:"64px",height:"350upx",background:"#000000",progress:{color:"green"}},title:"影视详情",buttons:null,show:!0,webview:null,webviewShow:!0,fanhui:null,full:null,statusBarHeight:0,screenWidth:0,screenHeight:0,time:"00:00",titleShow:!1,boxHeight:"350px",scrollHeight:"394upx",scrollTop:"394upx",pageTitle:null,timer:null,titleButtonShowFlag:!1,pageIndex:1,h450:0,ipad:!1,isFullScreen:!1,fullScreenButton:null,isControllShow:!1,suo1:null,suo2:null,jiesuo:!0,full2:null,suo1show:!1,suo2show:!1,playTimer:null,videoTitleNvue:null,currentWebview:null,buttom:null,nextTimer:null,first:!0,suo2timer:null,platform:"",request:null,hasNotchInScreen:!1,main:"",windowMe:"",decorView:"",View:"",params:"",noList:!1}},onBackPress:function(t){if(this.isFullScreen)return this.portraitScreen(),!0},computed:{src:function(){var e=this.num;if(e=parseFloat(e),0==this.list.length)return"";var i,o=this.list[e];return o&&(i=o.m3u8url,this.first?t.$emit("videoLoad",i):(t.$emit("videoPlayNext",i),t.$emit("videoNum",e))),i},itemName:function(){var e=this.num;if(e=parseFloat(e),0==this.list.length)return"";var i=this.list[e];return t.$emit("videoTitileChange",this.title+"   "+i.num),i.num}},created:function(){this.platform=t.getSystemInfoSync().platform},onShow:function(){t.$emit("webviewResume")},onHide:function(){t.$emit("webviewPause")},onLoad:function(e){var i=this,o=t.getSystemInfoSync();this.statusBarHeight=o.statusBarHeight,this.screenWidth=o.screenWidth,this.screenHeight=o.screenHeight,this.h450=t.upx2px(450),this.screenWidth>=768?(this.ipad=!0,460!=this.h450&&(this.h450=460)):225!=this.h450&&(this.h450=225),this.detailData=JSON.parse(e.data);var n=this.detailData.name;this.title=n.split(" ")[0],t.setNavigationBarTitle({title:this.title}),this.boxHeight=this.h450+"px",this.scrollHeight="calc(100% - "+(44+t.getSystemInfoSync().statusBarHeight+this.h450)+"px)",this.scrollTop=44+t.getSystemInfoSync().statusBarHeight+this.h450+"px",this.scrollHeight="calc(100% - "+this.h450+"px)",this.scrollTop=this.h450+"px",this.titleShow=!1,this.full=new plus.nativeObj.View("full",{top:"36px",left:"0",height:"100%",width:"100%",backgroundColor:"rgba(255,255,255,0)"}),this.full.setStyle({top:this.statusBarHeight+44+"px",height:this.h450-50+"px"}),this.full.show(),this.full.addEventListener("click",(function(){if(!i.jiesuo)return i.suo1.show("auto",0,(function(){})),i.suo1show=!0,clearTimeout(i.suo2timer),void(i.suo2timer=setTimeout((function(){i.suo1.hide("auto",0),i.suo1show=!1}),3e3));i.isFullScreen?i.titleShow?(t.$emit("videoTitileHide"),t.$emit("videoButtomHide"),t.$emit("controllHide"),i.titleShow=!1,i.isControllShow=!1,i.suo2.hide("auto",0),i.suo2show=!1,i.fullScreenButton.hide("auto",0)):(t.$emit("videoTitileShow"),t.$emit("videoButtomShow"),t.$emit("controllShow"),i.titleShow=!0,i.isControllShow=!0,i.suo2.show(),i.suo2show=!0,i.fullScreenButton.show("auto",0,(function(){}))):i.isControllShow?(i.isControllShow=!1,t.$emit("controllHide"),t.$emit("videoButtomHide"),i.fullScreenButton.hide("auto",0)):(i.isControllShow=!0,t.$emit("controllShow"),t.$emit("videoButtomShow"),i.fullScreenButton.show("auto",0,(function(){})))}),!0),this.full.addEventListener("doubleclick",(function(){i.jiesuo&&t.$emit("videoToggle")}),!0);var s,u=0,l=0,h=60;this.full.addEventListener("touchstart",(function(t){i.jiesuo&&(u=t.clientX,l=t.clientY)})),this.full.addEventListener("touchmove",(function(e){i.jiesuo&&(clearTimeout(s),s=setTimeout((function(){var o=e.clientX,n=e.clientY,s=o-u,r=n-l;if(Math.abs(s)>Math.abs(r));else if(r<-h||r>h){var a=i.h450,c=parseFloat((n/a).toFixed(2));if(i.isFullScreen){if(o<=1*i.screenHeight/4&&o>=0&&t.setScreenBrightness({value:1-c}),o<=i.screenHeight&&o>=3*i.screenHeight/4){var d=i.screenWidth,f=parseFloat((n/d).toFixed(2));plus.device.setVolume(1-f)}}else o<=1*i.screenWidth/4&&o>=0&&t.setScreenBrightness({value:1-c}),o<=i.screenWidth&&o>=3*i.screenWidth/4&&plus.device.setVolume(1-c)}}),15))})),this.full.addEventListener("touchend",(function(t){i.jiesuo})),"ios"==this.platform?this.fullScreenButton=new plus.nativeObj.View("fullScreenButton",{top:44+t.getSystemInfoSync().statusBarHeight+this.h450-50+"px",right:"0",width:"90px",height:"50px",backgroundColor:"rgba(255,255,255,0)"}):this.fullScreenButton=new plus.nativeObj.View("fullScreenButton",{top:44+t.getSystemInfoSync().statusBarHeight+this.h450-50+"px",left:t.getSystemInfoSync().screenWidth-70+"px",right:"0",width:"90px",height:"50px",backgroundColor:"rgba(255,255,255,0)"}),this.fullScreenButton.show("auto",0,(function(){})),this.fullScreenButton.addEventListener("click",(function(){i.isFullScreen?i.portraitScreen():i.landscapeScreen()})),t.$on("exitFullscreen",(function(){i.portraitScreen()})),t.showLoading({title:"加载中…"}),this.request=t.request({url:t.getStorageSync("baseUrl"),data:{ysurl:this.detailData.url},method:"GET",complete:function(e){if(i.loading=!1,200==e.statusCode&&e.data&&0==e.data.code){for(var o=e.data.list,n=0;n<o.length;n++){var s=o[n].download,u=o[n].m3u8url,l=o[n].onlineurl,h={num:o[n].num,download:"",m3u8url:"",onlineurl:""};-1!=s.indexOf(".m3u8")&&(h.m3u8url=s),-1!=s.indexOf(".mp4")&&(h.download=s),-1==s.indexOf(".m3u8")&&-1==s.indexOf(".mp4")&&(h.onlineurl=s),-1!=u.indexOf(".m3u8")&&(h.m3u8url=u),-1!=u.indexOf(".mp4")&&(h.download=u),-1==u.indexOf(".m3u8")&&-1==u.indexOf(".mp4")&&(h.onlineurl=u),-1!=l.indexOf(".m3u8")&&(h.m3u8url=l),-1!=l.indexOf(".mp4")&&(h.download=l),-1==l.indexOf(".m3u8")&&-1==l.indexOf(".mp4")&&(h.onlineurl=l),o[n]=h}i.list=o,t.$emit("videoList",i.list),i.obj=e.data.data,i.list.length<=4&&-1==i.obj.genre.indexOf("综艺")&&-1==i.obj.genre.indexOf("日韩动漫")&&(i.obj.genre.indexOf("剧")<=-1||-1!=i.obj.genre.indexOf("剧情片")||-1!=i.obj.genre.indexOf("喜剧片")||-1!=i.obj.genre.indexOf("悲剧片"))&&(i.buttom.close(),i.noList=!0),setTimeout((function(){t.$emit("videoPlayNext",i.list[0].m3u8url),t.$emit("videoNum",0)}),300)}else t.showModal({title:"提示",content:"数据加载失败",showCancel:!1,success:function(t){t.confirm&&i.back()}})}}),this.videoList=t.getSubNVueById("list"),this.videoList.hide("auto",0)},onReady:function(e){var i=this,o=t.getSystemInfoSync(),n=t.getStorageSync("config");this.index=n.index,this.statusBarHeight=o.statusBarHeight,this.screenWidth=o.screenWidth,this.screenHeight=o.screenHeight,this.h450=t.upx2px(450),this.currentWebview=this.$mp.page.$getAppWebview(),this.titleNView=this.currentWebview.getTitleNView(),this.screenWidth>=768?(this.ipad=!0,460!=this.h450&&(this.h450=460)):400==this.h450&&(this.h450=225);var s=new plus.nativeObj.Bitmap("bmp1");s.load("static/suo1.png",(function(){i.suo1=new plus.nativeObj.View("suo1",{top:i.screenWidth/2-32+"px",left:"40px",height:"54px",width:"54px",backgroundColor:"rgba(0,0,0,0)"}),i.suo1.drawRect({color:"rgba(0,0,0,0.1)",radius:"27px"},{top:"0px",left:"0px",width:"100%",height:"100%"}),i.suo1.drawBitmap(s,{top:"0px",left:"0px",width:"100%",height:"100%"},{top:"auto",left:"auto",width:"60%",height:"60%"}),i.suo1.hide("auto",0),i.suo1.addEventListener("click",(function(){i.suo2.show("auto",0,(function(){})),i.suo1.hide("auto",0),i.jiesuo=!0,i.suo1show=!1,i.suo2show=!0,t.$emit("videoTitileShow"),t.$emit("videoButtomShow"),t.$emit("controllShow"),i.titleShow=!0,i.isControllShow=!0,i.fullScreenButton.show("auto",0,(function(){}))}),!1)}));var u=new plus.nativeObj.Bitmap("bmp2");u.load("static/suo2.png",(function(){i.suo2=new plus.nativeObj.View("suo2",{top:i.screenWidth/2-32+"px",left:"40px",height:"54px",width:"54px",backgroundColor:"rgba(0,0,0,0)"}),i.suo2.drawRect({color:"rgba(0,0,0,0.1)",radius:"27px"},{top:"0px",left:"0px",width:"100%",height:"100%"}),i.suo2.drawBitmap(u,{top:"0px",left:"0px",width:"100%",height:"100%"},{top:"auto",left:"auto",width:"60%",height:"60%"}),i.suo2.hide("auto",0),i.suo2.addEventListener("click",(function(){i.suo1.show("auto",0,(function(){})),i.suo2.hide("auto",0),i.suo2show=!1,i.jiesuo=!1,i.suo1show=!0,t.$emit("videoTitileHide"),t.$emit("videoButtomHide"),t.$emit("controllHide"),i.titleShow=!1,i.isControllShow=!1,i.fullScreenButton.hide("auto",0),clearTimeout(i.suo2timer),i.suo2timer=setTimeout((function(){i.suo1.hide("auto",0),i.suo1show=!1}),3e3)}),!1)})),t.$on("playNext",(function(){i.playNext()})),t.$on("changePlay",(function(e){if(i.num=e,e=parseFloat(e),0==i.list.length)return"";var o=i.list[e];if(o){var n=o.m3u8url;t.$emit("videoPlayNext",n),t.$emit("videoNum",e),t.$emit("videoTitileChange",i.title+"   "+o.num)}})),t.$on("fullHide",(function(e){i.full.hide("auto",0),t.$emit("videoTitileHide"),t.$emit("videoButtomHide"),t.$emit("controllHide"),i.titleShow=!1,i.isControllShow=!1,i.suo2.hide("auto",0),i.suo2show=!1,i.fullScreenButton.hide("auto",0)})),t.$on("fullShow",(function(e){i.full.show("auto",0,(function(){})),i.isFullScreen&&(t.$emit("videoTitileShow"),i.titleShow=!0,i.suo2.show(),i.suo2show=!0),t.$emit("videoButtomShow"),t.$emit("controllShow"),i.isControllShow=!0,i.fullScreenButton.show("auto",0,(function(){}))}))},onNavigationBarButtonTap:function(e){e.index,0==e.index&&t.showToast({title:"点击了收藏"})},onUnload:function(){plus.screen.lockOrientation("portrait-primary"),this.fullScreenButton.close(),clearInterval(this.timer),clearInterval(this.playTimer),t.hideLoading(),t.$off("exitFullscreen"),t.$off("playNext"),t.$off("fullHide"),t.$off("fullShow"),t.$off("changePlay"),this.full.close(),this.suo1.close(),this.suo2.close(),this.buttom.hide("auto",0),this.videoTitleNvue.hide("auto",0),this.video.hide("auto",0),this.videoList.hide("auto",0),this.request.abort()},methods:{back:function(){t.navigateBack()},imgError:function(t){t.cover="/static/404.jpg"},play:function(){t.$emit("videoPlay")},play2:function(e,i){this.num==i||(this.num=i);var o=this.num;o=parseFloat(o);var n=this.list[o],s=n.m3u8url;t.$emit("videoPlayNext",s),t.$emit("videoNum",o)},playNext:function(){var e=this;clearTimeout(this.nextTimer),this.nextTimer=setTimeout((function(){var i=e.num;if(i=parseFloat(i),i++,i>=e.list.length-1)i=e.list.length-1;else{e.num=i;var o=e.list[i];if(o){var n=o.m3u8url;t.$emit("videoPlayNext",n),t.$emit("videoNum",i),t.$emit("videoTitileChange",e.title+"   "+o.num)}}}),300)},landscapeScreen:function(){plus.navigator.setFullscreen(!0),this.currentWebview.setStyle({popGesture:"none"}),plus.screen.lockOrientation("landscape-primary"),this.ipad?this.video.setStyle({top:-this.statusBarHeight+"px",left:"0px",width:this.screenHeight+"px",height:this.screenWidth+this.statusBarHeight+"px"}):this.video.setStyle({top:"0px",left:"0px",width:this.screenHeight+"px",height:this.screenWidth+"px"}),this.titleNView.hide("auto",0),this.videoTitleNvue.show("auto",0),this.isFullScreen=!0,"ios"==this.platform?(this.fullScreenButton.setStyle({top:this.screenWidth-42+"px"}),this.full.setStyle({top:"40px",height:this.screenWidth-110+"px"}),this.videoTitleNvue.setStyle({top:"0px",width:this.screenHeight+"px"}),this.buttom.setStyle({bottom:"4px"})):(this.fullScreenButton.setStyle({top:this.screenWidth-48+"px",left:t.getSystemInfoSync().screenHeight-70+"px"}),this.full.setStyle({top:"60px",height:this.screenWidth-110+"px"}),this.videoTitleNvue.setStyle({top:"0px",width:this.screenHeight+"px"}),this.buttom.setStyle({bottom:"4px"})),t.$emit("videoTitileShow"),t.$emit("videoButtomShow"),t.$emit("videoButtomXuanjiShow"),this.suo2.show("auto",0,(function(){})),this.suo2show=!0,this.titleShow=!0,t.$emit("landscapeScreen"),this.buttom.show("auto",0),this.noList?t.$emit("videoNoList"):t.$emit("videoFull")},portraitScreen:function(){var e=this;plus.navigator.setFullscreen(!1),this.currentWebview.setStyle({popGesture:"close"}),plus.screen.lockOrientation("portrait-primary"),this.titleNView.show("auto",0,(function(){})),this.videoTitleNvue.hide("auto",0),this.isFullScreen=!1,"ios"==this.platform?(this.fullScreenButton.setStyle({top:44+t.getSystemInfoSync().statusBarHeight+this.h450-42+"px"}),this.full.setStyle({top:this.statusBarHeight+44+"px",height:this.h450-70+"px"}),this.videoTitleNvue.setStyle({top:44+t.getSystemInfoSync().statusBarHeight+"px",width:this.screenWidth+"px"}),this.video.setStyle({top:"64px",left:"0px",width:this.screenWidth+"px",height:this.h450+"px"}),this.buttom.setStyle({bottom:this.screenHeight-this.h450-(44+t.getSystemInfoSync().statusBarHeight)+4+"px"})):setTimeout((function(){var i=10,o=e.h450+i;e.boxHeight=o+"px",e.scrollHeight="calc(100% - "+o+"px)",e.full.setStyle({top:e.statusBarHeight+44+"px",height:i+e.h450-50+"px"}),e.video.setStyle({top:i+44+t.getSystemInfoSync().statusBarHeight+"px",left:"0px",width:"100%",height:e.h450+"px"}),e.fullScreenButton.setStyle({top:i+44+t.getSystemInfoSync().statusBarHeight+e.h450-50+"px",left:t.getSystemInfoSync().screenWidth-70+"px",right:"0",width:"90px",height:"50px"})}),320),t.$emit("videoButtomXuanjiHide"),t.$emit("videoTitileHide"),t.$emit("videoButtomHide"),this.suo2.hide("auto",0),this.suo2show=!1,this.titleShow=!1,t.$emit("portraitScreen"),this.buttom.hide("auto",0),t.$emit("videoNoFull")}}};e.default=l}).call(this,i("543d")["default"])},"0d43":function(t,e,i){"use strict";i.r(e);var o=i("077c"),n=i.n(o);for(var s in o)"default"!==s&&function(t){i.d(e,t,(function(){return o[t]}))}(s);e["default"]=n.a},1965:function(t,e,i){},5104:function(t,e,i){"use strict";var o,n=function(){var t=this,e=t.$createElement;t._self._c},s=[];i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return o}))},"55ca":function(t,e,i){"use strict";i.r(e);var o=i("5104"),n=i("0d43");for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("a3e1"),i("a83d");var u,l=i("f0c5"),h=Object(l["a"])(n["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],u);e["default"]=h.exports},"5c8e":function(t,e,i){"use strict";(function(t){i("3be2");o(i("66fd"));var e=o(i("55ca"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("543d")["createPage"])},7681:function(t,e,i){},a3e1:function(t,e,i){"use strict";var o=i("1965"),n=i.n(o);n.a},a83d:function(t,e,i){"use strict";var o=i("7681"),n=i.n(o);n.a}},[["5c8e","common/runtime","common/vendor"]]]);