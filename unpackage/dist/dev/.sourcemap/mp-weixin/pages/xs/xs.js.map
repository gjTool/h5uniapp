{"version":3,"sources":["uni-app:///main.js","webpack:///E:/work/h5uniapp/pages/xs/xs.vue?9a64","webpack:///E:/work/h5uniapp/pages/xs/xs.vue?c11e","webpack:///E:/work/h5uniapp/pages/xs/xs.vue?e479","webpack:///E:/work/h5uniapp/pages/xs/xs.vue?fb99","uni-app:///pages/xs/xs.vue","webpack:///E:/work/h5uniapp/pages/xs/xs.vue?5a55","webpack:///E:/work/h5uniapp/pages/xs/xs.vue?93ad"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,mF;AACAA,UAAU,CAACC,WAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+G;AAC/G;AACsD;AACL;AACc;;;AAG/D;AACoL;AACpL,gBAAgB,6LAAU;AAC1B,EAAE,wEAAM;AACR,EAAE,6EAAM;AACR,EAAE,sFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,iFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,0MAEN;AACP;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACvCA;AAAA;AAAA;AAAA;AAAuqB,CAAgB,4rBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACgE3rB,8E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;uxCAKA,EACA,cACA,sBADA,EAEA,kBAFA,EAGA,oBAHA,EAIA,gBAJA,EADA,EAOA,IAPA,kBAOA,CACA,SACA,WADA,EACA;AACA,kBAFA,EAGA,MAHA,EAIA,UAJA,EAKA,WALA,EAMA,cANA,EAOA,aAPA,EAQA,SARA,EASA,OATA,EAUA,QAVA,EAWA,UAXA,EAYA,QAZA,EAaA,YAbA,EAcA,eAdA,EAeA,eAfA,EAgBA,mBAhBA,EAiBA,iBAjBA,EAkBA,iBAlBA,EAmBA,8CAnBA,EAoBA,SACA,aADA,EAEA,oBAFA,EAGA,iBAHA,EAIA,cAJA,EApBA,EA0BA,YA1BA,EA2BA,UA3BA,EA4BA,YA5BA,EA6BA,kBA7BA,EA8BA,cA9BA,EA+BA,WA/BA,EA+BA;AACA,gBAhCA,EAgCA;AACA,mBAjCA,EAiCA;AACA,2BAlCA,EAkCA;AACA,2BAnCA,EAmCA;AACA,aApCA,EAoCA;AACA,cArCA,EAqCA;AACA,cAtCA,EAuCA,QAvCA,EAwCA,YAxCA,EAwCA;AACA,eAzCA,EA0CA,eA1CA,EA2CA,YA3CA,EA4CA,cA5CA,EA6CA,eA7CA,EA8CA,YA9CA,EA+CA,oBA/CA,EAgDA,QAhDA,EAiDA,UAjDA,EAkDA,OAlDA,EAmDA,cAnDA,GAqDA,CA7DA,EA8DA,YACA,QADA,sBACA,CACA,wCACA,YACA,CACA;AACA,KANA,EA9DA;;AAsEA,SAtEA,qBAsEA;AACA,sCADA,CACA;AACA;AACA,uFAHA,CAGA;AACA;AACA;AACA;AACA,GA7EA;AA8EA,mBA9EA,6BA8EA,GA9EA,EA8EA;AACA;AACA,sDADA;AAEA,qCAFA;AAGA,2GAHA;;AAKA,GApFA;AAqFA,iBArFA,6BAqFA;AACA;AACA,sDADA;AAEA,qCAFA;AAGA,+FAHA;;AAKA,GA3FA;AA4FA;AACA,eADA,yBACA;AACA;AACA;AACA;AACA;AACA;AACA,KAPA;AAQA,cARA,wBAQA;AACA;AACA;AACA;AACA;AACA;AACA,KAdA;AAeA,cAfA,sBAeA,CAfA,EAeA;AACA;AACA;AACA;AACA,KAnBA;AAoBA,QApBA,kBAoBA;AACA;AACA;AACA;AACA,0BADA;AAEA,sBAFA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OANA,EAMA,GANA;AAOA,KAtCA;AAuCA,QAvCA,kBAuCA;AACA;AACA;AACA;AACA,2BADA;AAEA,sBAFA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OANA,EAMA,GANA;AAOA,KA5DA;AA6DA;AACA,iBA9DA,2BA8DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BADA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BADA;AAEA,uBAFA;;AAIA;AACA,OAhBA,CAgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCADA;AAEA,iCAFA;;AAIA,mBALA,EAKA,CALA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAHA,EAGA,GAHA;AAIA;AACA;;AAEA;AACA;AACA;AACA,4CADA;AAEA;AACA,iCADA,EAFA;;AAKA,uBALA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAHA,EAGA,GAHA;AAIA,aAPA,MAOA;AACA;AACA;AACA,eAFA,EAEA,GAFA;AAGA;AACA;AACA,4CADA;AAEA,4BAFA;;AAIA;AACA;AACA,WAzBA;;AA2BA;AACA,KApKA;AAqKA;AACA,cAtKA,wBAsKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAnLA;AAoLA;AACA,aArLA,qBAqLA,GArLA,EAqLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAlNA;AAmNA;AACA,WApNA,mBAoNA,GApNA,EAoNA;AACA;AACA;AACA;AACA;AACA;AACA,0CADA;AAEA;AACA,qBADA,EAFA;;AAKA,qBALA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA,WAJA,MAIA;AACA;AACA;AACA;AACA,SAhBA;;AAkBA,KA3OA;AA4OA;AACA,iBA7OA,yBA6OA,GA7OA,EA6OA,IA7OA,EA6OA,KA7OA,EA6OA;AACA;AACA;AACA;AACA;AACA;AACA,0BADA,EACA;AACA,0BAFA,EAEA;AACA,sBAHA,EAGA;AACA,qBAJA,EAIA;AACA,oBALA,EAKA;AACA,qBANA,EAMA;AACA,oBAPA,EAOA;AACA,gBARA;;AAUA;AACA,8BADA,EACA;AACA,6BAFA,EAEA;AACA,gBAHA,EAGA;AACA,kBAJA,EAIA;AACA,oBALA,CAKA;AALA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAFA,CAEA;AACA,sCAHA,CAGA;AACA,qCAJA,CAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OA3BA,MA2BA;AACA;AACA;AACA;;AAEA;AACA,KAvSA;AAwSA,YAxSA,sBAwSA;AACA;AACA,sBADA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCADA;AAEA,4BAFA;;AAIA,aALA,MAKA;AACA;AACA;AACA;AACA,+BADA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAnUA;AAoUA,YApUA,sBAoUA;AACA;AACA;AACA,oBADA;AAEA,wBAFA;;AAIA,KA1UA;AA2UA,QA3UA,kBA2UA;AACA;AACA,gBADA;;AAGA,KA/UA;AAgVA,WAhVA,qBAgVA;AACA;AACA;AACA,KAnVA;AAoVA,cApVA,wBAoVA;AACA;AACA,0BADA;AAEA,qBAFA;AAGA,kBAHA;AAIA,sBAJA;AAKA,yBALA;;AAOA;AACA,uHADA;;AAGA,KA/VA;AAgWA,eAhWA,yBAgWA;AACA;;;;;;;;;AASA,KA1WA;AA2WA,qBA3WA,+BA2WA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAFA;AAGA;AACA;AACA,SAFA,EAEA,CAFA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBADA;AAEA,mBAFA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WATA;AAUA;AACA;AACA;AACA;AACA;AACA,aAFA,MAEA;AACA;AACA,aAFA,MAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SA5BA,EA4BA,CA5BA;AA6BA,OA1CA;AA2CA,KA1ZA;AA2ZA,WA3ZA,qBA2ZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAlaA;AAmaA,cAnaA,wBAmaA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA,KArcA;AAscA,iBAtcA,yBAscA,MAtcA,EAscA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAFA,CAEA;AACA,sCAHA,CAGA;AACA,qCAJA,CAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAJA;AAKA,aANA;AAOA;AACA;AACA;AACA;AACA;AACA,KA7dA,EA5FA;;AA2jBA;AACA;AACA,mCADA,CACA;AACA;AACA;AACA,GAhkBA;AAikBA,SAjkBA,qBAikBA;AACA;AACA;AACA;;;;AAIA;AACA;AACA,kBADA;AAEA,aAFA,mBAEA,GAFA,EAEA;AACA;AACA,OAJA;;AAMA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA,GAxnBA;AAynBA,UAznBA,sBAynBA;;;;AAIA,GA7nBA;AA8nBA,QA9nBA,kBA8nBA,OA9nBA,EA8nBA;AACA;;;;AAIA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBADA;;AAGA;AACA;AACA,0CADA;AAEA;AACA,4BADA,EAFA;;AAKA,qBALA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAFA,CAEA;AACA;AACA,WARA,MAQA;AACA;AACA,+BADA;AAEA,0BAFA;;AAIA;AACA,SArBA;;AAuBA,KAxBA,EAwBA,GAxBA;AAyBA;AACA;AACA;AACA;AACA;AACA,0BADA;;AAGA;AACA;AACA;AACA,KARA;AASA,GAprBA,E;;;;;;;;;;;;;ACrEA;AAAA;AAAA;AAAA;AAAquC,CAAgB,ssCAAG,EAAC,C;;;;;;;;;;;ACAzvC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/xs/xs.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/xs/xs.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./xs.vue?vue&type=template&id=0dfbf666&\"\nvar renderjs\nimport script from \"./xs.vue?vue&type=script&lang=js&\"\nexport * from \"./xs.vue?vue&type=script&lang=js&\"\nimport style0 from \"./xs.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/xs/xs.vue\"\nexport default component.exports","export * from \"-!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./xs.vue?vue&type=template&id=0dfbf666&\"","var components\ntry {\n  components = {\n    uniNavBar: function() {\n      return import(\n        /* webpackChunkName: \"components/uni-nav-bar/uni-nav-bar\" */ \"@/components/uni-nav-bar/uni-nav-bar.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      _vm.fontSize = 20\n      _vm.uni.setStorageSync(\"fontsize\", this.fontSize)\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./xs.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./xs.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"content\" >\r\n\t\t<view v-if=\"index==1\">\r\n\t\t\t<uni-nav-bar\r\n\t\t\t\tv-if=\"index==1\"\r\n\t\t\t\t:status-bar=\"true\"\r\n\t\t\t\t:show=\"show\"\r\n\t\t\t\tleft-icon=\"arrowleft\"\r\n\t\t\t\t@click-left=\"back\"\r\n\t\t\t\t:title=\"title\"\r\n\t\t\t\t:background-color=\"'#ec706b'\"\r\n\t\t\t\tclass=\"uni-nav-bar\"\r\n\t\t\t/>\r\n\t\t\t<view class=\"text-item text-item-top\" v-show=\"!show\"  :class=\"{ black: black }\">\r\n\t\t\t\t<text>{{ title }}</text>\r\n\t\t\t</view>\r\n\t\t\t<view\r\n\t\t\t\t@click=\"scrollClick\"\r\n\t\t\t\tclass=\"scroll\"\r\n\t\t\t\tid=\"scrollview\"\r\n\t\t\t\t:class=\"{ black: black }\"\r\n\t\t\t>\r\n\t\t\t\t<view class=\"scroll-content\" :class=\"{ black: black }\">\r\n\t\t\t\t\t<view class=\"text-item text-grey\" v-show=\"itemshow\" :class=\"{ black: black }\"><text>------------- 本章开始 -------------</text></view>\r\n\t\t\t\t\t<view class=\"img-list m-item\" v-for=\"(item, index) in list\" :key=\"index\">\r\n\t\t\t\t\t\t<view class=\"text-item\" :class=\"{ black: black }\" >\r\n\t\t\t\t\t\t\t<text class=\"text-content\" :style=\"{'font-size':fontSize+'px'}\">{{ item }}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"text-item  text-grey\" v-show=\"itemshow\" :class=\"{ black: black }\"><text>------------- 本章结束 -------------</text></view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- 加载图标 -->\r\n\t\t\t<mixLoading class=\"mix-loading\" v-if=\"loading\"></mixLoading>\r\n\t\t\t<!-- #ifdef APP-PLUS -->\r\n\t\t\t<view class=\"text-item  text-item-bottom\" v-show=\"!show\" :class=\"{ black: black }\">\r\n\t\t\t\t<battery class=\"battery\" :proQuantity=\"level\"></battery>\r\n\t\t\t\t<view class=\"time\" :class=\"{android:platform=='android'}\">\r\n\t\t\t\t\t<text>{{ time }}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- #endif -->\r\n\t\t</view>\r\n\t\t<view class=\"bottom-tools\" :class=\"{ 'show:': show, hide: !show }\" v-if=\"index==1\">\r\n\t\t\t<view class=\"bottom-view\">\r\n\t\t\t\t<button class=\"bottom-button bottom-button1\" type=\"primary\" size=\"mini\" plain=\"true\" @click=\"prev\">上一章</button>\r\n\t\t\t\t<slider v-if=\"xslist.length\" class=\"bottom-slider\" :value=\"num\" min=\"0\" :max=\"xslist.length\" disabled block-size=\"12\" />\r\n\t\t\t\t<button class=\"bottom-button bottom-button1\" type=\"primary\" size=\"mini\" plain=\"true\" @click=\"next\">下一章</button>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"bottom-view\">\r\n\t\t\t\t<button class=\"bottom-button\" type=\"primary\" size=\"mini\" plain=\"true\" @click=\"gotoxslist\">目录</button>\r\n\t\t\t\t<button class=\"bottom-button\" type=\"primary\" size=\"mini\" plain=\"true\" @click=\"refontSize\">A-</button>\r\n\t\t\t\t<button class=\"bottom-button\" type=\"primary\" size=\"mini\" plain=\"true\" @click=\"fontSize=20;uni.setStorageSync('fontsize', this.fontSize)\">普通</button>\r\n\t\t\t\t<button class=\"bottom-button\" type=\"primary\" size=\"mini\" plain=\"true\" @click=\"addfontSize\">A+</button>\r\n\t\t\t\t<button class=\"bottom-button\" type=\"primary\" size=\"mini\" plain=\"true\" @click=\"changeBg\">{{ black ? '白天' : '黑夜' }}</button>\r\n\t\t\t\t<!-- #ifdef APP-PLUS -->\r\n\t\t\t\t<button class=\"bottom-button\" type=\"primary\" size=\"mini\" plain=\"true\" @click=\"download\">下载</button>\r\n\t\t\t\t<!-- #endif -->\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nimport config from '@/config';\r\nimport mixLoading from '@/components/mix-loading/mix-loading';\r\nimport uniIcons from '@/components/uni-icons/uni-icons.vue';\r\nimport uniNavBar from '@/components/uni-nav-bar/uni-nav-bar.vue';\r\nimport battery from '@/components/battery/battery.vue';\r\nexport default {\r\n\tcomponents: {\r\n\t\tmixLoading,\r\n\t\tuniIcons,\r\n\t\tuniNavBar,\r\n\t\tbattery\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tmode: false, // false上下滚动 true左右滑动\r\n\t\t\tblack: false,\r\n\t\t\tnum: 0,\r\n\t\t\txsname: '',\r\n\t\t\tshow: false,\r\n\t\t\tvisible: false,\r\n\t\t\tloading: true,\r\n\t\t\ttitle: '',\r\n\t\t\turl: '',\r\n\t\t\turl1: '',\r\n\t\t\txslist: [],\r\n\t\t\tlist: [],\r\n\t\t\tscrollTop: 0,\r\n\t\t\tprevTimer: null,\r\n\t\t\tnextTimer: null,\r\n\t\t\txsurl2Request: null,\r\n\t\t\tscrollTimer: null,\r\n\t\t\tscrollTopTotal: 0,\r\n\t\t\tfontSize:uni.getStorageSync('fontsize')||20,\r\n\t\t\tstyle: {\r\n\t\t\t\tpageHeight: 0,\r\n\t\t\t\tcontentViewHeight: 0,\r\n\t\t\t\tfootViewHeight: 0,\r\n\t\t\t\tmitemHeight: 0\r\n\t\t\t},\r\n\t\t\tplatform:\"\",\r\n\t\t\tmain:null,\r\n\t\t\tIntent:null,\r\n\t\t\tIntentFilter:null,\r\n\t\t\tUIDevice: null,\r\n\t\t\tbattery: {}, //电池对象\r\n\t\t\tlevel: 100, //电量百分比\r\n\t\t\ttime: '00:00', //当前时间\r\n\t\t\tgetBatteryTimer: null, //获取电池电量的定时\r\n\t\t\tload5limitCache: true, //是否开启预加载后5章\r\n\t\t\tflag: 0, //1向左滑动,2向右滑动,3向上滑动 4向下滑动\r\n\t\t\ttext: '', //向哪里滑动\r\n\t\t\tlastX: 0,\r\n\t\t\tlastY: 0,\r\n\t\t\tditance: 120, //滑动的判定距离\r\n\t\t\tcover: '',\r\n\t\t\tcurrentIndex: 0,\r\n\t\t\tpageList: [],\r\n\t\t\twindowWidth: 0,\r\n\t\t\twindowHeight: 0,\r\n\t\t\tpageIndex: 0,\r\n\t\t\tcurrentWebview: null,\r\n\t\t\tindex: 0,\r\n\t\t\topenid: \"\",\r\n\t\t\tobj:{},\r\n\t\t\tdetailData: {}\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\titemshow() {\r\n\t\t\tif (this.list && this.list.length > 0) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\t},\r\n\tcreated() {\r\n\t\tconst res = uni.getSystemInfoSync(); //获取手机可使用窗口高度     api为获取系统信息同步接口\r\n\t\tthis.style.pageHeight = res.windowHeight;\r\n\t\tthis.style.contentViewHeight = res.windowHeight - (res.screenWidth / 750) * 100 - 70; //像素   因为给出的是像素高度 然后我们用的是upx  所以换算一下\r\n\t\tthis.windowWidth = res.windowWidth;\r\n\t\tthis.windowHeight = res.windowHeight;\r\n\t\tthis.platform = uni.getSystemInfoSync().platform\r\n\t},\r\n\tonShareAppMessage(res) {\r\n\t  return {\r\n\t\ttitle: \"[免费小说]\"+this.xsname+\" \"+this.title,\r\n\t\timageUrl:this.detailData.cover,\r\n\t\tpath: '/pages/xs/xs?src=' + encodeURIComponent(this.url) + \"&data=\" + JSON.stringify(this.detailData)\r\n\t  }\r\n\t},\r\n\tonShareTimeline(){\r\n\t\treturn {\r\n\t\t\ttitle: \"[免费小说]\"+this.xsname+\" \"+this.title,\r\n\t\t\timageUrl:this.detailData.cover,\r\n\t\t\tquery: 'src=' + encodeURIComponent(this.url) + \"&data=\" + JSON.stringify(this.detailData)\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\taddfontSize(){\r\n\t\t\tthis.fontSize++\r\n\t\t\tif(this.fontSize>=28){\r\n\t\t\t\tthis.fontSize=28\r\n\t\t\t}\r\n\t\t\tuni.setStorageSync('fontsize', this.fontSize);\r\n\t\t},\r\n\t\trefontSize(){\r\n\t\t\tthis.fontSize--;\r\n\t\t\tif(this.fontSize<=12){\r\n\t\t\t\tthis.fontSize=12\r\n\t\t\t}\r\n\t\t\tuni.setStorageSync('fontsize', this.fontSize);\r\n\t\t},\r\n\t\tchangePage(e) {\r\n\t\t\tlet index = e.detail.current;\r\n\t\t\tthis.pageIndex = index;\r\n\t\t\t// console.log(index)\r\n\t\t},\r\n\t\tprev() {\r\n\t\t\tlet _this = this;\r\n\t\t\tif (_this.num <= 0) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '已经是第一章了',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t// _this.list = [];\r\n\t\t\tclearTimeout(this.prevTimer);\r\n\t\t\tthis.prevTimer = setTimeout(() => {\r\n\t\t\t\tthis.num--;\r\n\t\t\t\tif (_this.num <= -1) {\r\n\t\t\t\t\t_this.num = 0;\r\n\t\t\t\t}\r\n\t\t\t\tthis.reloadContent();\r\n\t\t\t}, 300);\r\n\t\t},\r\n\t\tnext() {\r\n\t\t\tlet _this = this;\r\n\t\t\tif (_this.num >= this.xslist.length - 1) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '已经是最后一章了',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t// _this.list = [];\r\n\t\t\tclearTimeout(this.nextTimer);\r\n\t\t\tif (this.xsurl2Request) {\r\n\t\t\t\tthis.xsurl2Request.abort();\r\n\t\t\t}\r\n\t\t\tthis.nextTimer = setTimeout(() => {\r\n\t\t\t\t_this.num++;\r\n\t\t\t\tif (_this.num >= this.xslist.length) {\r\n\t\t\t\t\t_this.num = this.xslist.length - 1;\r\n\t\t\t\t}\r\n\t\t\t\tthis.reloadContent();\r\n\t\t\t}, 300);\r\n\t\t},\r\n\t\t//加载接口替换当前章节内容\r\n\t\treloadContent() {\r\n\t\t\tlet _this = this;\r\n\t\t\tlet num = this.num;\r\n\t\t\tnum = isNaN( parseInt(num)) ? 0:parseInt(num);\r\n\t\t\tif(this.xslist && this.xslist.length){\r\n\t\t\t\tthis.title = this.xslist[num].num;\r\n\t\t\t\tuni.setNavigationBarTitle({\r\n\t\t\t\t\ttitle: this.title\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tthis.detailData.title = this.title;\r\n\t\t\tthis.detailData.index = num;\r\n\t\t\tthis.detailData.Time = new Date().getTime();\r\n\t\t\tthis.detailData.saveTime = config.getDate(\"/\");\r\n\t\t\tconfig.setXsZJ(num, this.detailData)\r\n\t\t\tthis.$eventHub.$emit('changeXsNum', num);\r\n\t\t\ttry {\r\n\t\t\t\tconst value = uni.getStorageSync('xsShouCang');\r\n\t\t\t\tif (value) {\r\n\t\t\t\t\tlet flag = false;\r\n\t\t\t\t\tfor (let i = 0; i < value.length; i++) {\r\n\t\t\t\t\t\tif (value[i].name == _this.xsname) {\r\n\t\t\t\t\t\t\tvalue[i].num = num;\r\n\t\t\t\t\t\t\tflag = true;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tuni.setStorage({\r\n\t\t\t\t\t\tkey: 'xsShouCang',\r\n\t\t\t\t\t\tdata: value\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\t//TODO handle the exception\r\n\t\t\t}\r\n\t\t\tif (this.xslist.length) {\r\n\t\t\t\tlet data = this.xslist;\r\n\t\t\t\t_this.title = data[num].num;\r\n\t\t\t\t_this.list = [];\r\n\t\t\t\tlet value = uni.getStorageSync('xsDownload');\r\n\t\t\t\tlet flag = false;\r\n\t\t\t\tif (value) {\r\n\t\t\t\t\tfor (let i = 0; i < value.length; i++) {\r\n\t\t\t\t\t\tif (value[i].name == _this.xsname) {\r\n\t\t\t\t\t\t\tlet arr = value[i].data;\r\n\t\t\t\t\t\t\tfor (let j = 0; j < arr.length; j++) {\r\n\t\t\t\t\t\t\t\tif ((arr[j].num || arr[j].num == 0) && arr[j].num == num && arr[j].list.length) {\r\n\t\t\t\t\t\t\t\t\t_this.list = arr[j].list;\r\n\t\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\t\tuni.pageScrollTo({\r\n\t\t\t\t\t\t\t\t\t\t\tscrollTop: 0,\r\n\t\t\t\t\t\t\t\t\t\t\tduration: 0\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}, 0);\r\n\t\t\t\t\t\t\t\t\tflag = true;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t//本章已加载  继续缓存后5章\r\n\t\t\t\tif (flag) {\r\n\t\t\t\t\t_this.loading = false;\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.getScrollTopTotal();\r\n\t\t\t\t\t\tthis.load5limit();\r\n\t\t\t\t\t}, 300);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_this.loading = true;\r\n\t\t\t\t_this.setCacheValue(num, [], 'loading');\r\n\t\t\t\t_this.xsurl2Request = uni.request({\r\n\t\t\t\t\turl: uni.getStorageSync('baseUrl'),\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\txsurl2: data[num].url\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmethod: 'GET',\r\n\t\t\t\t\tcomplete: res => {\r\n\t\t\t\t\t\tif (res.statusCode == 200 && res.data && res.data.code == 0) {\r\n\t\t\t\t\t\t\t_this.list = res.data.content;\r\n\t\t\t\t\t\t\t_this.setCacheValue(num, _this.list, 'done');\r\n\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\tthis.getScrollTopTotal();\r\n\t\t\t\t\t\t\t\tthis.load5limit();\r\n\t\t\t\t\t\t\t}, 300);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\tthis.getScrollTopTotal();\r\n\t\t\t\t\t\t\t}, 300);\r\n\t\t\t\t\t\t\t_this.setCacheValue(num, [], 'fail');\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '获取第' + num + '章内容失败',\r\n\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t_this.loading = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t//缓存后5章\r\n\t\tload5limit() {\r\n\t\t\tif (!this.load5limitCache) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tlet _this = this;\r\n\t\t\tlet num = this.num;\r\n\t\t\tnum = isNaN( parseInt(num)) ? 0:parseInt(num);\r\n\t\t\tlet xslist = this.xslist;\r\n\t\t\tthis.loadCache(num + 1);\r\n\t\t\tthis.loadCache(num + 2);\r\n\t\t\tthis.loadCache(num + 3);\r\n\t\t\tthis.loadCache(num + 4);\r\n\t\t\tthis.loadCache(num + 5);\r\n\t\t},\r\n\t\t//加载缓存\r\n\t\tloadCache(num) {\r\n\t\t\tlet xslist = this.xslist;\r\n\t\t\tif (num >= xslist.length) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tlet _this = this;\r\n\t\t\tlet value = uni.getStorageSync('xsDownload');\r\n\t\t\tlet data = _this.xslist;\r\n\t\t\tnum = isNaN( parseInt(num)) ? 0:parseInt(num);\r\n\t\t\tlet flag = false;\r\n\t\t\tif (value) {\r\n\t\t\t\tfor (let i = 0; i < value.length; i++) {\r\n\t\t\t\t\tif (value[i].name == _this.xsname) {\r\n\t\t\t\t\t\tlet arr = value[i].data;\r\n\t\t\t\t\t\tfor (let j = 0; j < arr.length; j++) {\r\n\t\t\t\t\t\t\tif (arr[j].num && arr[j].num == num && (arr[j].list.length || arr[j].state == 'loading')) {\r\n\t\t\t\t\t\t\t\tflag = true;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//第num章没有缓存，请求接口\r\n\t\t\tif (!flag) {\r\n\t\t\t\t_this.setCacheValue(num, [], 'loading');\r\n\t\t\t\t_this.getData(num);\r\n\t\t\t}\r\n\t\t},\r\n\t\t//缓存请求接口\r\n\t\tgetData(num) {\r\n\t\t\tlet _this = this;\r\n\t\t\tlet data = this.xslist;\r\n\t\t\tnum = isNaN( parseInt(num)) ? 0:parseInt(num);\r\n\t\t\tlet url = data[num].url;\r\n\t\t\tuni.request({\r\n\t\t\t\turl: uni.getStorageSync('baseUrl'),\r\n\t\t\t\tdata: {\r\n\t\t\t\t\txsurl2: url\r\n\t\t\t\t},\r\n\t\t\t\tmethod: 'GET',\r\n\t\t\t\tcomplete: res => {\r\n\t\t\t\t\t_this.loading = false;\r\n\t\t\t\t\tif (res.statusCode == 200 && res.data && res.data.code == 0) {\r\n\t\t\t\t\t\tlet list = res.data.content;\r\n\t\t\t\t\t\t// console.log('加载成功：第' + num + '章');\r\n\t\t\t\t\t\t_this.setCacheValue(num, list, 'done');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// console.log('加载失败：第' + num + '章');\r\n\t\t\t\t\t\t_this.setCacheValue(num, [], 'fail');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t//设置缓存\r\n\t\tsetCacheValue(num, list, state) {\r\n\t\t\tlet _this = this;\r\n\t\t\tlet data = this.xslist;\r\n\t\t\tnum = isNaN( parseInt(num)) ? 0:parseInt(num);\r\n\t\t\t// console.log(_this.cover);\r\n\t\t\tlet obj = {\r\n\t\t\t\tname: _this.xsname, //小说名称\r\n\t\t\t\tcover: _this.cover, //当前小说预览图\r\n\t\t\t\turl: this.url1, //小说url\r\n\t\t\t\tnum: this.num, //当前章节索引\r\n\t\t\t\tcache: false, //是否缓存-显示在下载管理\r\n\t\t\t\tdownload: '0', //缓存状态  0未缓存 1下载完毕 2正在下载 3下载暂停\r\n\t\t\t\txslist: data, //小说章节目录\r\n\t\t\t\tdata: []\r\n\t\t\t};\r\n\t\t\tlet obj2 = {\r\n\t\t\t\tnumName: data[num].num, //缓存下载的章节名称\r\n\t\t\t\tnumUrl: data[num].url, //缓存下载的章节url\r\n\t\t\t\tnum: num, //缓存下载的章节索引\r\n\t\t\t\tlist: list, //缓存下载的章节内容\r\n\t\t\t\tstate: state //缓存状态 loading fail done\r\n\t\t\t};\r\n\t\t\tobj.data.push(obj2);\r\n\t\t\tlet value = uni.getStorageSync('xsDownload');\r\n\t\t\tlet isSave = false;\r\n\t\t\tif (value) {\r\n\t\t\t\tfor (let i = 0; i < value.length; i++) {\r\n\t\t\t\t\tif (value[i].name == _this.xsname) {\r\n\t\t\t\t\t\tlet arr = value[i].data;\r\n\t\t\t\t\t\tvalue[i].cover = _this.cover; //当前小说预览图\r\n\t\t\t\t\t\tvalue[i].url = _this.url1; //小说url\r\n\t\t\t\t\t\tvalue[i].num = _this.num; //当前章节索引\r\n\t\t\t\t\t\tlet flag = false;\r\n\t\t\t\t\t\tfor (let j = 0; j < arr.length; j++) {\r\n\t\t\t\t\t\t\tif (arr[j].numName == data[num].num && arr[j].num == num) {\r\n\t\t\t\t\t\t\t\tarr[j].list = list;\r\n\t\t\t\t\t\t\t\tarr[j].numUrl = data[num].url;\r\n\t\t\t\t\t\t\t\tarr[j].state = state;\r\n\t\t\t\t\t\t\t\tflag = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!flag) {\r\n\t\t\t\t\t\t\tvalue[i].xslist = data;\r\n\t\t\t\t\t\t\tvalue[i].data.push(obj2);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tisSave = true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (!isSave) {\r\n\t\t\t\t\tvalue.push(obj);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tvalue = [];\r\n\t\t\t\tvalue.push(obj);\r\n\t\t\t}\r\n\r\n\t\t\tuni.setStorageSync('xsDownload', value);\r\n\t\t},\r\n\t\tdownload() {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '点击了下载'\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t\tlet value = uni.getStorageSync('xsDownload');\r\n\t\t\tif (value) {\r\n\t\t\t\tfor (let i = 0; i < value.length; i++) {\r\n\t\t\t\t\tif (value[i].name == this.xsname) {\r\n\t\t\t\t\t\tif (value[i].cache) {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '已经加入下载了',\r\n\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvalue[i].cache = true;\r\n\t\t\t\t\t\t\tvalue[i].download = '2';\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '加入下载成功'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.$eventHub.$emit('xsDownload', value[i]);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tuni.setStorageSync('xsDownload', value);\r\n\t\t\t}\r\n\t\t},\r\n\t\tchangeBg() {\r\n\t\t\tthis.black = !this.black;\r\n\t\t\tuni.setStorage({\r\n\t\t\t\tkey: 'black',\r\n\t\t\t\tdata: this.black\r\n\t\t\t});\r\n\t\t},\r\n\t\tback() {\r\n\t\t\tuni.navigateBack({\r\n\t\t\t\tdelta: 1\r\n\t\t\t});\r\n\t\t},\r\n\t\tshuaxin() {\r\n\t\t\tthis.loading = true;\r\n\t\t\tthis.getData(this.num);\r\n\t\t},\r\n\t\tgotoxslist() {\r\n\t\t\tlet data = {\r\n\t\t\t\txsname: this.title,\r\n\t\t\t\tnum: this.num,\r\n\t\t\t\tfrom: \"xs\",\r\n\t\t\t\turl: this.url1,\r\n\t\t\t\tcover: this.cover\r\n\t\t\t}\r\n\t\t\tuni.navigateTo({\r\n\t\t\t\turl: `/pages/xslist/xslist?data=${JSON.stringify(data)}&obj=${JSON.stringify(this.detailData)}`\r\n\t\t\t});\r\n\t\t},\r\n\t\tscrollClick() {\r\n\t\t\tthis.show = !this.show;\r\n\t\t\t// #ifdef APP-PLUS\r\n\t\t\tif (this.show) {\r\n\t\t\t\tplus.navigator.setFullscreen(false);\r\n\t\t\t} else {\r\n\t\t\t\tplus.navigator.setFullscreen(true);\r\n\t\t\t}\r\n\t\t\tthis.getBattery();\r\n\t\t\t// #endif\r\n\t\t},\r\n\t\tgetScrollTopTotal() {\r\n\t\t\tlet that = this;\r\n\t\t\tlet query = uni.createSelectorQuery();\r\n\t\t\tquery.selectAll('.m-item').boundingClientRect();\r\n\t\t\tquery.exec(res => {\r\n\t\t\t\tthat.style.mitemHeight = 0;\r\n\t\t\t\tres[0].forEach((rect, index) => {\r\n\t\t\t\t\tthat.style.mitemHeight = that.style.mitemHeight + rect.height;\r\n\t\t\t\t});\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthat.scrollTopTotal = that.style.mitemHeight - that.style.contentViewHeight;\r\n\t\t\t\t}, 0);\r\n\t\t\t\tthat.pageList = [];\r\n\t\t\t\tthat.pageIndex = 0;\r\n\t\t\t\tthat.currentIndex = 0;\r\n\t\t\t\t//得出一共有几页\r\n\t\t\t\tlet count = Math.ceil(this.style.mitemHeight / this.style.contentViewHeight);\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tvar arr = [],\r\n\t\t\t\t\t\theight = 0,\r\n\t\t\t\t\t\tobj2 = {};\r\n\t\t\t\t\tres[0].forEach((rect, index) => {\r\n\t\t\t\t\t\theight = height + rect.height;\r\n\t\t\t\t\t\tfor (let i = 1; i <= count; i++) {\r\n\t\t\t\t\t\t\tif (height >= i * this.style.contentViewHeight - 20) {\r\n\t\t\t\t\t\t\t\tif (!obj2[i - 1]) {\r\n\t\t\t\t\t\t\t\t\tobj2[i - 1] = index;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tfor (let j = 0; j < count; j++) {\r\n\t\t\t\t\t\tvar obj = {};\r\n\t\t\t\t\t\tobj.id = j;\r\n\t\t\t\t\t\tif (j == 0) {\r\n\t\t\t\t\t\t\tobj.contentList = that.list.slice(0, obj2[j]);\r\n\t\t\t\t\t\t} else if (j == count - 1) {\r\n\t\t\t\t\t\t\tobj.contentList = that.list.slice(obj2[j - 1], that.list.lenght);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tobj.contentList = that.list.slice(obj2[j - 1], obj2[j]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tarr.push(obj);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthat.currentIndex = 0;\r\n\t\t\t\t\tthat.pageList = arr;\r\n\t\t\t\t}, 0);\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetTIme() {\r\n\t\t\tlet date = new Date();\r\n\t\t\tlet hour = date.getHours();\r\n\t\t\tlet minute = date.getMinutes();\r\n\t\t\thour = hour <= 9 ? '0' + hour : hour;\r\n\t\t\tminute = minute <= 9 ? '0' + minute : minute;\r\n\t\t\tthis.time = hour + ':' + minute;\r\n\t\t},\r\n\t\tgetBattery() {\r\n\t\t\tlet _this = this;\r\n\t\t\t_this.getTIme();\r\n\t\t\t// #ifdef APP-PLUS\r\n\t\t\tif(this.platform == \"ios\"){\r\n\t\t\t\tlet dev = _this.UIDevice.currentDevice();\r\n\t\t\t\tif (!dev.isBatteryMonitoringEnabled()) {\r\n\t\t\t\t\tdev.setBatteryMonitoringEnabled(true);\r\n\t\t\t\t}\r\n\t\t\t\tlet level = dev.batteryLevel();\r\n\t\t\t\tif (level <= 1 && level >= 0) {\r\n\t\t\t\t\t_this.level = Math.round(level * 100);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t_this.level = Math.round(level);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tlet recevier = plus.android.implements('io.dcloud.feature.internal.reflect.BroadcastReceiver', {\r\n\t\t\t\t\tonReceive: function(context, intent) {\r\n\t\t\t\t\t\tlet action = intent.getAction();\r\n\t\t\t\t\t\tif (action == _this.Intent.ACTION_BATTERY_CHANGED) {\r\n\t\t\t\t\t\t\tlet level = intent.getIntExtra('level', 0); //电量\r\n\t\t\t\t\t\t\tif (level <= 1 && level >= 0) {\r\n\t\t\t\t\t\t\t\t_this.level = Math.round(level) * 100;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t_this.level = Math.round(level);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t_this.getTIme();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tlet filter = new _this.IntentFilter(_this.Intent.ACTION_BATTERY_CHANGED);\r\n\t\t\t\t_this.main.registerReceiver(recevier, filter);\r\n\t\t\t}\r\n\t\t\t// #endif\r\n\t\t},\r\n\t\tgetCacheState(xslist) {\r\n\t\t\tlet _this = this;\r\n\t\t\tlet value = uni.getStorageSync('xsDownload');\r\n\t\t\tif (value) {\r\n\t\t\t\tfor (let i = 0; i < value.length; i++) {\r\n\t\t\t\t\tif (value[i].name == _this.xsname) {\r\n\t\t\t\t\t\tlet arr = value[i].data;\r\n\t\t\t\t\t\tvalue[i].cover = _this.cover; //当前小说预览图\r\n\t\t\t\t\t\tvalue[i].url = _this.url1; //小说url\r\n\t\t\t\t\t\tvalue[i].num = _this.num; //当前章节索引\r\n\t\t\t\t\t\tvalue[i].xslist = xslist;\r\n\t\t\t\t\t\tarr.forEach(item => {\r\n\t\t\t\t\t\t\txslist.forEach(obj => {\r\n\t\t\t\t\t\t\t\tif (item.numName == obj.num && item.state == 'done') {\r\n\t\t\t\t\t\t\t\t\tobj.state = 'done';\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tuni.setStorageSync('xsDownload', value);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t//监听页面滚动\r\n\tonPageScroll: function(obj) {\r\n\t\tthis.scrollTop = obj.scrollTop; //实时获取到滚动的值\r\n\t\t// console.log(\"onPageScroll-------\",obj.scrollTop)\r\n\t\t// console.log(this.scrollTopTotal - this.scrollTop)\r\n\t},\r\n\tonReady() {\r\n\t\tlet _this = this;\r\n\t\tlet option = uni.getStorageSync('config');\r\n\t\tthis.index = option.index\r\n\t\t// #ifndef MP\r\n\t\tthis.index = 1\r\n\t\t// #endif\r\n\t\tthis.openid = uni.getStorageSync(\"userInfo\").openid;\r\n\t\tuni.getStorage({\r\n\t\t\tkey: 'black',\r\n\t\t\tsuccess(res) {\r\n\t\t\t\t_this.black = res.data;\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.getTIme();\r\n\t\t// #ifdef APP-PLUS\r\n\t\tthis.currentWebview = this.$mp.page.$getAppWebview();\r\n\t\tthis.currentWebview.setStyle({\r\n\t\t\tpopGesture: 'none'\r\n\t\t});\r\n\t\tswitch (uni.getSystemInfoSync().platform) {\r\n\t\t\tcase 'android':\r\n\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\t//注意，安卓需要配置下manifest.json文件，打开后，进入模块权限配置，\r\n\t\t\t\t//在右侧的Android权限设置里勾选上android.permission.BATTERY_STATS\r\n\t\t\t\t_this.main = plus.android.runtimeMainActivity();\r\n\t\t\t\t_this.Intent = plus.android.importClass('android.content.Intent');\r\n\t\t\t\t_this.IntentFilter = plus.android.importClass('android.content.IntentFilter');\r\n\t\t\t\t_this.getBattery();\r\n\t\t\t\t// #endif\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'ios':\r\n\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\t_this.UIDevice = plus.ios.import('UIDevice');\r\n\t\t\t\t_this.getBattery();\r\n\t\t\t\t// #endif\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\t_this.battery = navigator.battery || navigator.mozBattery || navigator.webkitBattery;\r\n\r\n\t\t\t\tfunction updateBatteryStatus(info) {\r\n\t\t\t\t\t_this.level = _this.battery.level * 100;\r\n\t\t\t\t\t_this.getTIme();\r\n\t\t\t\t}\r\n\t\t\t\tif (_this.battery) {\r\n\t\t\t\t\t_this.battery.addEventListener('levelchange', updateBatteryStatus);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnavigator.getBattery().then(function(battery) {\r\n\t\t\t\t\t\t_this.battery = battery;\r\n\t\t\t\t\t\t_this.battery.addEventListener('levelchange', updateBatteryStatus);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\t// #endif\r\n\t},\r\n\tonUnload() {\r\n\t\t// #ifdef APP-PLUS\r\n\t\tplus.navigator.setFullscreen(false);\r\n\t\t// #endif\r\n\t},\r\n\tonLoad(options) {\r\n\t\tlet _this = this;\r\n\t\t// #ifdef APP-PLUS\r\n\t\tplus.navigator.setFullscreen(true);\r\n\t\t// #endif\r\n\t\tthis.openid = uni.getStorageSync(\"userInfo\").openid;\r\n\t\tthis.detailData = JSON.parse(options.data);\r\n\t\t\r\n\t\tthis.title = this.detailData.title;\r\n\t\tthis.url = decodeURIComponent(options.src);\r\n\t\tthis.xsname = this.detailData.name;\r\n\t\tthis.cover = this.detailData.cover;\r\n\t\tthis.num = this.detailData.index ? this.detailData.index :0;\r\n\t\tthis.url1 = this.detailData.url;\r\n\t\t_this.xslist = uni.getStorageSync('xslist' + this.url1);\r\n\t\tuni.setNavigationBarTitle({\r\n\t\t\ttitle: this.title\r\n\t\t});\r\n\t\tsetTimeout(() => {\r\n\t\t\tuni.request({\r\n\t\t\t\turl: uni.getStorageSync('baseUrl'),\r\n\t\t\t\tdata: {\r\n\t\t\t\t\txsurl1: _this.url1\r\n\t\t\t\t},\r\n\t\t\t\tmethod: 'GET',\r\n\t\t\t\tcomplete: res => {\r\n\t\t\t\t\tif (res.statusCode == 200 && res.data && res.data.code == 0) {\r\n\t\t\t\t\t\tlet data = res.data.list;\r\n\t\t\t\t\t\t_this.xslist = data;\r\n\t\t\t\t\t\t_this.getCacheState(data);\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tuni.setStorageSync('xslist' + _this.url1, _this.xslist);\r\n\t\t\t\t\t\t} catch (e) {}\r\n\t\t\t\t\t\t// _this.reloadContent();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '获取章节目录失败',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}, 100);\r\n\t\t_this.reloadContent();\r\n\t\t//监听事件\r\n\t\tthis.$eventHub.$on('changeXsContent', (data, index) => {\r\n\t\t\t_this.title = data.num;\r\n\t\t\tuni.setNavigationBarTitle({\r\n\t\t\t\ttitle: _this.title\r\n\t\t\t});\r\n\t\t\t_this.num = index;\r\n\t\t\t_this.url = data.url;\r\n\t\t\t_this.reloadContent();\r\n\t\t});\r\n\t}\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.img-list {\r\n\twidth: 750upx;\r\n}\r\n\r\nimage {\r\n\twidth: 750upx;\r\n}\r\n\r\nuni-image {\r\n\twidth: 750upx;\r\n}\r\n\r\npage {\r\n\theight: 100%;\r\n\tbackground-color: #ebd8b0;\r\n}\r\n\r\n.content {\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\theight: 100%;\r\n}\r\n\r\n.scroll {\r\n\tflex: 1;\r\n\theight: 100%;\r\n\tposition: relative;\r\n\tz-index: 0;\r\n\t// position: fixed;\r\n\t// top:0;\r\n\t// left: 0;\r\n}\r\n\r\n.scroll-content {\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tpadding: 20px 0;\r\n}\r\n\r\n.text-item {\r\n\tpadding: 0 6px;\r\n\ttext-indent: 16px;\r\n\tfont-size: 18px;\r\n}\r\n.text-content {\r\n\tfont-size: 20px;\r\n}\r\n.text-item.text-grey {\r\n\tcolor: #444;\r\n\tfont-size: 14px;\r\n\ttext-indent: 0px;\r\n\ttext-align: center;\r\n}\r\n\r\n.text-item.black {\r\n\tcolor: #555;\r\n}\r\n\r\n.scroll,\r\n.uni-scroll-view,\r\n.scroll-content {\r\n\tbackground-color: #ebd8b0;\r\n}\r\n\r\n.scroll.black,\r\n.uni-scroll-view.black,\r\n.scroll-content.black {\r\n\tbackground-color: #070707;\r\n}\r\n\r\n.bottom-tools {\r\n\twidth: 100%;\r\n\tposition: fixed;\r\n\tz-index: 1;\r\n\tbottom: 0;\r\n\tleft: 0;\r\n\tbackground-color: #ec706b;\r\n\ttransition: all 0.1s;\r\n\t.bottom-view {\r\n\t\twidth: 100%;\r\n\t\tpadding: 7px 0;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-around;\r\n\t\talign-items: center;\r\n\t\t.bottom-button {\r\n\t\t\tcolor: #ffffff !important;\r\n\t\t\tborder: 1px solid #ffffff !important;\r\n\t\t}\r\n\t\t.bottom-button.bottom-button1 {\r\n\t\t\tcolor: #ffffff !important;\r\n\t\t\tborder: none !important;\r\n\t\t\tpadding: 0 !important;\r\n\t\t\tmargin: 0 !important;\r\n\t\t}\r\n\t\t.bottom-slider {\r\n\t\t\tmin-width: 230px;\r\n\t\t\twidth: calc(100% - 150px);\r\n\t\t\tmargin: 0;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n.bottom-tools.hide {\r\n\ttransform: translateY(100%);\r\n}\r\n\r\n.bottom-tools.sow {\r\n\ttransform: translateY(0);\r\n}\r\n\r\n.text-item-top {\r\n\tposition: fixed;\r\n\ttop: 0;\r\n\tleft: 0;\r\n\twidth: 100%;\r\n\theight: 20px;\r\n\tbackground-color: #ebd8b0;\r\n\tz-index: 1;\r\n\tfont-size: 12px;\r\n\tcolor: #555555;\r\n\toverflow: hidden;\r\n\twhite-space: nowrap;\r\n\ttext-overflow: ellipsis;\r\n\ttext-indent: 0px;\r\n\ttext-align: center;\r\n}\r\n\r\n.text-item-bottom {\r\n\tposition: fixed;\r\n\tbottom: 0;\r\n\tleft: 0;\r\n\twidth: 100%;\r\n\theight: 20px;\r\n\tbackground-color: #ebd8b0;\r\n\tz-index: 1;\r\n\tdisplay: flex;\r\n\tjustify-content: flex-start;\r\n\talign-items: center;\r\n\r\n\t.battery {\r\n\t\tfont-size: 10px;\r\n\t\tmargin-right: 30px;\r\n\t}\r\n\r\n\t.time {\r\n\t\tfont-size: 12px;\r\n\t\tcolor: #555555;\r\n\t\tposition: absolute;\r\n\t\ttext-align: center;\r\n\t\twidth: 100%;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t}\r\n\t.time.android{\r\n\t\ttop: 4px;\r\n\t}\r\n\t.pagenum {\r\n\t\tfont-size: 12px;\r\n\t\tcolor: #555555;\r\n\t\tposition: absolute;\r\n\t\ttext-align: right;\r\n\t\ttop: 0;\r\n\t\tright: 10px;\r\n\t}\r\n}\r\n\r\n.text-item-top.black,\r\n.text-item-bottom.black {\r\n\tbackground-color: #070707;\r\n}\r\n.swiper-box {\r\n\tflex: 1;\r\n\theight: 100%;\r\n\tposition: relative;\r\n\tz-index: 0;\r\n}\r\n</style>\r\n","import mod from \"-!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./xs.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./xs.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1625798033404\n      var cssReload = require(\"D:/Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}